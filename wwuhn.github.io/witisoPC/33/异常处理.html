<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base target="_blank" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <script type="text/javascript">
 
 function goTopEx(){
        var obj=document.getElementById("goTopBtn");
        function getScrollTop(){
                return document.documentElement.scrollTop;
            }
        function setScrollTop(value){
                document.documentElement.scrollTop=value;
            }    
        window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
        obj.onclick=function(){
            var goTop=setInterval(scrollMove,10);
            function scrollMove(){
                    setScrollTop(getScrollTop()/111);
                    if(getScrollTop()<1)clearInterval(goTop);
                }
        }
    }


</script>
<script type="text/javascript">
 
 function goTopEx(){
        var obj=document.getElementById("goTopBtn");
        function getScrollTop(){
                return document.documentElement.scrollTop;
            }
        function setScrollTop(value){
                document.documentElement.scrollTop=value;
            }    
        window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
        obj.onclick=function(){
            var goTop=setInterval(scrollMove,10);
            function scrollMove(){
                    setScrollTop(getScrollTop()/111);
                    if(getScrollTop()<1)clearInterval(goTop);
                }
        }
    }


</script>
<title>异常处理</title>

 <style type="text/css">
#tbrowser a:link，.container a:visited{
font-size:18px;
text-decoration:none;
}
.container{
font-size:1.2em;
margin:auto;
font-family:"宋体";
width:75.29%;
line-height:1.4em;
}
P{
margin:8px;
text-indent:2em;
}
.uls{
color:#CC6666;
font-weight:bold;
}
.uls>ol{
list-style:none;
font-weight:normal;
list-style:lower-latin;
color:#000000;
line-height:1.3em;

}
h2{
font-size:20px;
font-weight:bold;
margin-top:15px;
margin-bottom:0px;
text-indent:0em;
}
img{
margin-right:5px;
}
.fc{
color:red;
}

a:link {
	text-decoration: none;
}


a:visited {
	text-decoration: none;
}
a:hover {
	text-decoration: none;
}
a:active {
	text-decoration: none;
}


#goTopBtn {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color:#eee;
    color:#000;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 105px;
    _bottom: "auto";
    cursor: pointer;
    opacity: .6;
    filter: Alpha(opacity=30);
	opacity=.3;
}
 #goTopBtn:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 
 
#goBottom {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 30px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
	writing-mode:tb-rl;
}
 #goBottom:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 #shangy {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 80px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
}
#xiay {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 55px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
}
 
 img{
 border:0;
 }
 
 \s*</p>

<p>\s*
 
 
</p>

<p>
</style>
</head>

<body>

<div class="container">
<p>异常处理</p>

<p>在Java中定义了非常多的异常，几乎涵盖了所有可能出现的问题，但是再多的定义也不能满足所有的情况，这时就需要自定义异常类；</p>

<p>try-catch:积极方式；</p>

<p>throws:消极方式－抛给原方法－main()方法；</p>

<p>throw and throws</p>

<p>if(i&gt;1000)</p>

<p>throw new Exception(&quot;警告，您输入的分数大于100，1&quot;);</p>

<p>throws-在方法中声明；</p>

<p>方法返回类型方法名([参数列表])throws 异常列表{}</p>

<p>throws:在方法的声明中来抛出异常；</p>

<p>throw:在方法体内使用抛出异常；</p>

<p>throw:抛出异常，手动引发异常，将异常抛给异常处理器，暂时不处理它；</p>

<p>throws:定义任何被调用方法的异常。声明异常，声明异常是指一个方法不处理它产生的异常，而是向上传递，谁调用这个方法，这个异常由谁处理，提醒调用此方法的其他方法。</p>

<p>错误类别</p>

<p>Syntax Error:Javac.exe,必须使用try-catch或throws，否则编译失败，一定要做异常处理；</p>

<p>Runtime Error:Java.exe，不处理也可以编译成功；</p>

<p>Logical Error:如本来想9折出售的图书写成了7折出售；</p>

<p>为什么try-catch或throws错误(Error)?Error仅在程序中处理它们是不够的，如堆栈溢出和内存耗尽，这些错误可能导致Java解释器崩溃，没有办法在程序中修复这些错误；</p>

<p>自定义异常类：</p>

<p>如限定书籍价格介于100-1000之间，如果超出则抛出异常，并利用throw自动触发异常事件；</p>

<p>编译器功能：</p>

<p>1 编译，也可以完成一些代码添加；</p>

<p>2 发现语法错误；</p>

<p>一个好的程序，不仅体现在它的功能强大与易操作性，还体现在它具有良好而完善的容错能力上。在编写程序时，要充分考虑到程序在运行时可能会产生的错误，以及应采取的措施。例如，在做除法时，用户输入的除数可能为0，在读取某个文件时，指定的文件不存在等；</p>

<p>当程序遇到错误时，程序就会终止运行，这不是所希望发生的事情，一般应采取的措施是捕获这些错误，并给出友好的提示，以使用户可以采取行动，决定是否解决问题或取消操作；</p>

<p>异常是指程序在运行过程中遇到某种错误而产生中断的一种事件；</p>

<p>良好的应用程序应当在出现异常时，向用户显示尽可能友好的提示信息，而不是显示一些让用户觉得不知所云的信息。</p>

<p>程序员可以自己编代码进行异常处理，也可以利用Java语言中提供的许多异常处理的类，更简洁、方便；</p>

<p>当异常发生时，Java将打印出错误信息，信息中包含异常的类型和堆栈跟踪链（Stack trace），堆栈跟踪链显示当异常发生时正在运行的一些方法信息。Stack trace用于显示当异常发生时正在运行时有关程序状态的报告；</p>

<p>try{</p>

<p>throw  Exception Object;  //抛出异常对象；</p>

<p>throw new  Exception(String s);</p>

<p>}catch(…){…}</p>

<p>执行顺序：throw→catch;</p>

<p>一个try区块可以搭配多个catch区块，但catch的排列有一定的规则，这跟catch小括号内的异常类有关。如果各个catch内的异常类有继承关系，则子类要排在前面，父类排在后面；如果没有继承关系，则可自由排列。</p>

<p>这样的规定主要是因为当JVM检测到try区域内有异常事件发生时，就会自动为该异常事件产生对应的异常对象，并比较该对象是否属于第1个catch类的对象，如果是就不会再比较下一个catch，否则就会继续往下比较。所以子类必须排在前面，若排在排在后面，便永远没有机会被比较，从而导致编译失败。</p>

<p>//要建立自定义异常类，就必须先继承函数库内的任一异常类</p>

<p>class BookException extends RuntimeException{</p>

<p>public  BookException(String msg){</p>

<p>//自定义的错误信息必须作为参数值上传至父类的构造函数才算设置完成</p>

<p>super(msg);</p>

<p>}</p>

<p>}</p>

<p>class Book{</p>

<p>private double  price=100.0;</p>

<p>//如果产生BookException异常，会将异常对象抛给book1.setPrice(99.0)</p>

<p>public void  setPrice(double price)throws BookException{</p>

<p>if(price&lt;100.0 || price&gt;1000.0)</p>

<p>//依照条件，使用throw强迫产生BookException对象，</p>

<p>//并把错误信息的字符串放在构造函数中，</p>

<p>//然后把参数值传递给BookException(String  msg)的msg</p>

<p>throw new  BookException(&quot;定价错误，不可为&quot;+price);</p>

<p>else</p>

<p>this.price=price;</p>

<p>}</p>

<p>public double  getPrice(){</p>

<p>return price;</p>

<p>}</p>

<p>}</p>

<p>class CustomException{</p>

<p>public static  void main(String[] args){</p>

<p>Book  book1=new Book();</p>

<p>try{</p>

<p>//调用前面的setPrice()方法</p>

<p>book1.setPrice(99.0);</p>

<p>}</p>

<p>catch(BookException e){</p>

<p>//前面try内的异常对象会传递给catch的参数e,里面存储着错误信息</p>

<p>System.out.println(e);</p>

<p>}</p>

<p>}</p>

<p>}</p>

<p>Java把执行上的错误称为exception，多半与内存中数据存取有关；</p>

<p>Syntax error:由Javac.exe检测；</p>

<p>Runtime error:由JVM检测；</p>

<p>在Java中，把异常事件都以异常对象的方式表示，异常事件的发生就是JVM产生了相应的异常对象，如果没有做异常处理，就会显示默认的错误信息。异常类定义了异常对象该存储什么信息。</p>

<p>如果没有异常处理，而又在Java.exe阶段出现了异常，则会直接看到JVM输出的默认异常信息。</p>

<p>异常处理语句也可以纳入流程控制语句的范畴；</p>

<p>class TryCatch{</p>

<p>public static void main(String[] args){</p>

<p>try{</p>

<p>String[] bookName={&quot;JAVA程序设计&quot;,&quot;JSP程序设计&quot;};</p>

<p>System.out.println(bookName[2]);</p>

<p>Sytem.out.println(&quot;是本好书！&quot;);</p>

<p>}</p>

<p>catch(ArrayIndexOutOfBoundsException e){</p>

<p>System.out.println(&quot;异常事件：数组索引值超过界面！&quot;);</p>

<p>}</p>

<p>catch(Exception e){</p>

<p>System.out.println(&quot;异常事件！&quot;);</p>

<p>}</p>

<p>System.out.println(&quot;异常事件已解决，继续执行…&quot;);</p>

<p>}</p>

<p>}</p>

<p>输出结果：</p>

<p>异常事件：数组索引值超过界面！</p>

<p>异常事件已解决，继续执行…</p>

<p>抛出异常比终止程序要灵活得多，这是因为可以提供一个“捕获”异常的处理器(handler)对异常情况进行处理。</p>

<p>在理想的状态下，用户输入数据的格式永远都是正确的，选择打开的文件也一定存在，并且永远不会出现bug.</p>

<p>如果一个用户在运行程序期间，由于程序的错误或一些外部环境的影响造成用户数据丢失，用户就有可能不再使用这个程序了。为了避免这类事情的发生，至少应该做到以下几点：</p>

<p>1 向用户通告错误；</p>

<p>2 保存所有操作的数据；</p>

<p>3 允许用户以适当的形式退出程序；</p>

<p>异常处理：是Java的健壮机制，用于处理调试好的程序可能出现的意外的情况。</p>

<p>Java语言编译器能够检测许多在其他语言中仅在运行时刻才能检测出来的问题。</p>

<p>Java语言给出了三种处理系统错误的机制</p>

<p>1 抛出一个异常；</p>

<p>2 日志；</p>

<p>3 使用断言；</p>
<p>

</div>
<a name="bottom" id="bottom"></a>
<DIV style="DISPLAY: none" id=goTopBtn>&and;</DIV>
<div id="goBottom"><a href="#bottom" target="_self">&or;</a></div>
<SCRIPT type=text/javascript>goTopEx();</SCRIPT>
</body>
</html>
<script language="javascript"> 
bg_evensssss("tbrowser","#fff","#F5F5F5","#FFFFCC","#FFDDFF");/*#FFFF84*/
</script>
