<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base target="_blank" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <script type="text/javascript">
 
 function goTopEx(){
var obj=document.getElementById("goTopBtn");
function getScrollTop(){
return document.documentElement.scrollTop;
}
function setScrollTop(value){
document.documentElement.scrollTop=value;
}
window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
obj.onclick=function(){
var goTop=setInterval(scrollMove,10);
function scrollMove(){
setScrollTop(getScrollTop()/111);
if(getScrollTop()<1)clearInterval(goTop);
}
}
}


</script>
<script type="text/javascript">
 
 function goTopEx(){
var obj=document.getElementById("goTopBtn");
function getScrollTop(){
return document.documentElement.scrollTop;
}
function setScrollTop(value){
document.documentElement.scrollTop=value;
}
window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
obj.onclick=function(){
var goTop=setInterval(scrollMove,10);
function scrollMove(){
setScrollTop(getScrollTop()/111);
if(getScrollTop()<1)clearInterval(goTop);
}
}
}


</script>
<title>set命令</title>

 <style type="text/css">
#tbrowser a:link，.container a:visited{
font-size:18px;
text-decoration:none;
}
.container{
font-size:1.2em;
margin:auto;
font-family:"宋体";
width:75.29%;
line-height:1.4em;
}

.uls{
color:#CC6666;
font-weight:bold;
}
.uls>ol{
list-style:none;
font-weight:normal;
list-style:lower-latin;
color:#000000;
line-height:1.3em;

}
h2{
font-size:20px;
font-weight:bold;
margin-top:5px;
margin-bottom:-15px;
text-indent:0em;
}
img{
margin-right:5px;
}
.fc{
color:red;
}

a:link {
	text-decoration: none;
}


a:visited {
	text-decoration: none;
}
a:hover {
	text-decoration: none;
}
a:active {
	text-decoration: none;
}


#goTopBtn {
	width: 18px;
line-height: 1.2;
padding: 5px 0;
background-color:#eee;
color:#000;
font-size: 12px;
text-align: center;
position: fixed;
_position: absolute;
 
right: 10px;
bottom: 105px;
_bottom: "auto";
cursor: pointer;
opacity: .6;
filter: Alpha(opacity=30);
	opacity=.3;
}
 #goTopBtn:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 
 
#goBottom {
	width: 18px;
line-height: 1.2;
padding: 5px 0;
background-color: #eee;
color: #fff;
font-size: 12px;
text-align: center;
position: fixed;
_position: absolute;
 
right: 10px;
bottom: 30px;
_bottom: "auto";
cursor: pointer;
filter: Alpha(opacity=30);
	opacity=.3;
	writing-mode:tb-rl;
}
 #goBottom:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 #shangy {
	width: 18px;
line-height: 1.2;
padding: 5px 0;
background-color: #eee;
color: #fff;
font-size: 12px;
text-align: center;
position: fixed;
_position: absolute;
 
right: 10px;
bottom: 80px;
_bottom: "auto";
cursor: pointer;
filter: Alpha(opacity=30);
	opacity=.3;
}
#xiay {
	width: 18px;
line-height: 1.2;
padding: 5px 0;
background-color: #eee;
color: #fff;
font-size: 12px;
text-align: center;
position: fixed;
_position: absolute;
 
right: 10px;
bottom: 55px;
_bottom: "auto";
cursor: pointer;
filter: Alpha(opacity=30);
	opacity=.3;
}
 
 img{
 border:0;
 }
 #tab1{
 width:100%;
 border-collapse:collapse;
 
 }
 #tab1 td{
 border:1px blue solid;
 }
#tbrowser {
	width:100%;
	margin:auto;
	border-collapse:collapse;
font-family:"宋体";
	
	table-layout:fixed;
	font-size:18px;
}

#tbrowser th,#tbrowser td{
border:1px solid #eee;
font-size:14px;
color:#000000;

font-family: "宋体";
padding-left:0px;
width:14.1%;

height:22px;
line-height:18px;
/*overflow:hidden;
white-space:nowrap;*/
}


#tbrowser thead th{
border-bottom:2px solid #3d580b;
background-color:#8fc629;
color:#fff;
/*padding:2px 0px;*/
display:table-column-group;
}
#tbrowser .nd{
border-bottom:2px solid #3d580b;
background-color:#8fc629;
background-color:#D3D3A9;
color:red;
}

#tbrowser th{
background-color:#f2f4b9;
}
#tbrowser th.title{
background-color:#e3e685;
}

#tbrowser caption{
font-weight:bold;
padding:1px 0px;
color:#3d580b;
font-size:18px;
}


#tbrowser .xhx{
border-bottom:0px solid #aaa;
}


#tbrowser tr{
height:6px;
}

#tbrowser tr>td{/*1*/
font-size:1em;

/*width:13%;*/
}
#tbrowser tr>td+td{/*2*/

/*width:8%;*/
font-size:1em;
}
#tbrowser tr>td+td+td{/*3*/
font-size:1em;
/*width:5%;*/
}
#tbrowser tr>td+td+td+td{/*4*/
font-size:1em;

/*width:6%;*/
}
#tbrowser tr>td+td+td+td+td{/*5*/
font-size:1em;

/*width:5%;*/
}
#tbrowser tr>td+td+td+td+td+td{/*6*/
/*width:13%;*/
font-size:1em;
}
#tbrowser tr>td+td+td+td+td+td+td{/*7*/
/*width:59%;*/
font-size:1em;
}


#tbrowser tfoot td{
border-width:0px;

line-height:18px;
font-size:16px;
color:#777;
}
.ph{
text-indent:4em;
color:blue;
line-height:18px;
}
p{
text-indent:-2em;
}table{
border-collapse:collapse;
width:88%;
margin:auto;
}
table td{
border:0px;
border:1px solid #aaa;
padding:4px;}
h2{
padding-bottom:22px;}
 </style>
</head>

<body>




<div class="container">
  <p>set [[/a [expression]][/p [variable=]]  string]<br />
    /a:将string设置成可求值的数字表达式；expression:合法的表达式； </p>
  <p>/p:将variable的值设置成输入行； <br />
    set /p num=“” 接收用户输入的信息，并将信息以字符串的形式保存在&quot;num&quot;变量中； <br />
    variable:指定需要设置或修改的变量 <br />
    string:指定要与指定变量关联的字符串； </p>
  <p>显示、设置或删除 cmd.exe 环境变量。 <br />
    SET [variable=[string]]<br />
    variable  指定环境变量名。 <br />
    string    指定要指派给变量的一系列字符串。 </p>
  <p>要显示当前环境变量，键入不带参数的 SET。 </p>
  <p>如果命令扩展被启用，SET 会如下改变:</p>
  <p>可仅用一个变量激活 SET 命令，等号或值不显示所有前缀匹配 <br />
    SET 命令已使用的名称的所有变量的值。例如:<br />
    SET P<br />
    会显示所有以字母 P 打头的变量 </p>
  <p>如果在当前环境中找不到该变量名称，SET 命令将把 ERRORLEVEL设置成 1。 <br />
    SET 命令不允许变量名含有等号。 </p>
  <p>在 SET 命令中添加了两个新命令行开关:<br />
    SET /A expression<br />
    SET /P variable=[promptString]</p>
  <p>/A 命令行开关指定等号右边的字符串为被评估的数字表达式。该表达式评估器很简单并以递减的优先权顺序支持下列操作:<br />
    ()                  - 分组 <br />
    !  ~ -               - 一元运算符 <br />
    *  / %               - 算数运算符 <br />
    +  -                 - 算数运算符 <br />
    &lt;&lt; &gt;&gt;               - 逻辑移位 <br />
    - 按位“与” <br />
    ^                   - 按位“异” <br />
    |                   - 按位“或” <br />
    =  *= /= %= += -=    - 赋值 <br />
    &amp;= ^= |= &lt;&lt;= &gt;&gt;=<br />
    ,                   - 表达式分隔符 </p>
  <p style="text-indent:2em;">如果您使用任何逻辑或取余操作符，您需要将表达式字符串用引号扩起来。在表达式中的任何非数字字符串键作为环境变量名称，这些环境变量名称的值已在使用前转换成数字。如果指定了一个环境变量名称，但未在当前环境中定义，那么值将被定为零。这使您可以使用环境变量值做计算而不用键入那些 % 符号来得到它们的值。如果 SET /A 在命令脚本外的命令行执行的，那么它显示该表达式的最后值。该分配的操作符在分配的操作符左边需要一个环境变量名称。除十六进制有 0x 前缀，八进制有 0 前缀的，数字值为十进位数字。因此，0x12 与 18 和 022 相同。请注意八进制公式可能很容易搞混: 08 和 09 是无效的数字，因为 8 和 9 不是有效的八进制位数。(&amp; )</p>
  <p>/P 命令行开关允许将变量数值设成用户输入的一行输入。读取输入行之前，显示指定的 promptString。promptString 可以是空的。 </p>
  <p>环境变量替换已如下增强:<br />
    %PATH:str1=str2%</p>
  <p>会扩展 PATH 环境变量，用 &quot;str2&quot; 代替扩展结果中的每个 &quot;str1&quot;。要有效地从扩展结果中删除所有的 &quot;str1&quot;，&quot;str2&quot; 可以是空的。str1 可以以星号打头；在这种情况下，&quot;str1&quot; 会从扩展结果的开始到 str1 剩余部分第一次出现的地方，都一直保持相配。 <br />
    也可以为扩展名指定子字符串。 <br />
    %PATH:~10,5%</p>
  <p>会扩展 PATH 环境变量，然后只使用在扩展结果中从第 11 个(偏移量 10)字符开始的五个字符。如果没有指定长度，则采用默认值，即变量数值的余数。如果两个数字(偏移量和长度)都是负数，使用的数字则是环境变量数值长度加上指定的偏移量或长度。 </p>
  <p>     %PATH:~-10%<br />
    会提取 PATH 变量的最后十个字符。 </p>
  <p>     %PATH:~0,-2%<br />
    会提取 PATH 变量的所有字符，除了最后两个。 </p>
  <p>终于添加了延迟环境变量扩充的支持。该支持总是按默认值被停用，但也可以通过 CMD.EXE 的 /V 命令行开关而被启用/停用。请参阅 CMD /?</p>
  <p>考虑到读取一行文本时所遇到的目前扩充的限制时，延迟环境变量扩充是很有用的，而不是执行的时候。以下例子说明直接变量扩充的问题:</p>
  <p>     set VAR=before<br />
    if &quot;%VAR%&quot; == &quot;before&quot; (<br />
    set VAR=after<br />
    if &quot;%VAR%&quot; == &quot;after&quot; @echo If you see this, it  worked<br />
    )<br />
    不会显示消息，因为在读到第一个 IF 语句时，BOTH IF 语句中的 %VAR% 会被代替；原因是: 它包含 IF 的文体，IF 是一个复合语句。所以，复合语句中的 IF 实际上是在比较 &quot;before&quot; 和after，这两者永远不会相等。同样，以下这个例子也不会达到 </p>
  <p>预期效果:<br />
    set LIST=<br />
    for %i in (*) do set LIST=%LIST% %i<br />
    echo %LIST%</p>
  <p>原因是，它不会在目前的目录中建立一个文件列表，而只是将LIST 变量设成找到的最后一个文件。这也是因为 %LIST% 在FOR 语句被读取时，只被扩充了一次；而且，那时的 LIST 变量是空的。因此，我们真正执行的 FOR 循环是:<br />
    for %i in (*) do set LIST= %i<br />
    这个循环继续将 LIST 设成找到的最后一个文件。 </p>
  <p>延迟环境变量扩充允许您使用一个不同的字符(惊叹号)在执行时间扩充环境变量。如果延迟的变量扩充被启用，可以将上面例子写成以下所示，以达到预期效果:</p>
  <p>    set  VAR=before<br />
    if &quot;%VAR%&quot; == &quot;before&quot; (<br />
    set VAR=after<br />
    if &quot;!VAR!&quot; == &quot;after&quot; @echo If you see this, it  worked<br />
    )</p>
  <p>     set LIST=<br />
    for %i in (*) do set LIST=!LIST! %i<br />
    echo %LIST%</p>
  <p>如果命令扩展被启用，有几个动态环境变量可以被扩展，但不会出现在 SET 显示的变量列表中。每次变量数值被扩展时，这些变量数值都会被动态计算。如果用户用这些名称中任何一个定义变量，那个定义会替代下面描述的动态定义:</p>
  <p>%CD% - 扩展到当前目录字符串。 <br />
    %DATE% - 用跟 DATE 命令同样的格式扩展到当前日期。 <br />
    %TIME% - 用跟 TIME 命令同样的格式扩展到当前时间。 <br />
    %RANDOM% - 扩展到 0 和 32767 之间的任意十进制数字。 <br />
    %ERRORLEVEL% - 扩展到当前  ERRORLEVEL 数值。 <br />
    %CMDEXTVERSION% - 扩展到当前命令处理器扩展版本号。 <br />
    %CMDCMDLINE% - 扩展到调用命令处理器的原始命令行。 </p>
  <p>set 自定义变量； <br />
    set 暂时修改预定义的环境变量； <br />
    setx 永久修改预定义的环境变量；</p>
</div>
<a name="bottom" id="bottom"></a>
<DIV style="DISPLAY: none" id=goTopBtn>&and;</DIV>
<div id="shangy"><a href="javascript:void(null)" onclick="shangy()" target="_self">&uarr;</a></div>
<div id="xiay"><a href="javascript:void(null)" onclick="xiay()" target="_self">&darr;</a></div>
<div id="goBottom"><a href="#bottom" target="_self">&or;</a></div>
<SCRIPT type=text/javascript>goTopEx();</SCRIPT>
<script type="text/javascript">
function xiay(){
window.scrollBy(0,window.innerHeight);
}
function shangy(){
window.scrollBy(0,-window.innerHeight);
}
</script>
</body>
</html>
