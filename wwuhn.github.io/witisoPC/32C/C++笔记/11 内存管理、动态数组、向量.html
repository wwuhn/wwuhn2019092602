<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base target="_blank" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<script type="text/javascript">
var userAgent = navigator.userAgent.toLowerCase();
var browser = 
	(browser = userAgent.match(/qqbrowser\/([\d.]+)/))?"qqbrowser/"+browser[1]:
	(browser = userAgent.match(/se\s+2.x/))?"sogou/2.x": //sougou
	(browser = userAgent.match(/msie\s+([\d.]+)/))?"msie/"+browser[1]: //ie
	(browser = userAgent.match(/chrome\/([\d.]+)/))?"chrome/"+browser[1]: //chrome
	(browser = userAgent.match(/firefox\/([\d.]+)/))?"firefox/"+browser[1]: //firefox
	(browser = userAgent.match(/version\/([\d.]+)\s+safari\/([\d.]+)/))?"safari/"+browser[1]: //safari
	(browser = userAgent.match(/opera\/([\d.]+)([\w\W]+)version\/([\d.]+)/))?"opera/"+browser[3]: //opera
	"other browser";
	var browser4 = browser.substr(0,2);
//实现回到页面顶部  
function goTopEx(){  
	var obj=document.getElementById("goTopBtn"); 
	var obj2=document.getElementById("shangy"); 
	var obj3=document.getElementById("xiay");
	var obj4=document.getElementById("goBottom");  
	
	function getScrollTop(){  
		if(browser4=="ch"){
			//chrome
			//chrome63.0.3239.132对DTD XHTML 1.0不再支持body.scrollTop属性，只支持documentElement.scrollTop 
			return document.documentElement.scrollTop; 
		}else{
			//IE、firefox
			return document.documentElement.scrollTop;  
		}  
	}
	function setScrollTop(value){ 
		if(browser4=="ch"){ 
			//chrome
			document.documentElement.scrollTop=value; 
		}else{  
			//IE、firefox
			document.documentElement.scrollTop=value;  
		} 
	}     
	window.onscroll=function(){getScrollTop()>50?obj.style.display="":obj.style.display="none";
	getScrollTop()>100?obj2.style.display="":obj2.style.display="none";
	document.body.clientHeight-getScrollTop()>650?obj3.style.display="":obj3.style.display="none";
	document.body.clientHeight-getScrollTop()>650?obj4.style.display="":obj4.style.display="none";
	}  
	obj.onclick=function(){  
		var goTop=setInterval(scrollMove,10);  
		function scrollMove(){  
				setScrollTop(getScrollTop()/1.1);  
				if(getScrollTop()<1)clearInterval(goTop);  
		}  
	}  
}  
function downn(){
	if(browser4=="ch"){
		//chrome
		window.scrollBy(0,document.body.clientHeight);
	}else{
		//IE、firefox
		window.scrollBy(0,document.documentElement.clientHeight*1000); 
	}
}
</script>
<script>
function changePage(){ 
	var page = document.getElementById("container");
	page.style.background="black";
	page.style.color="white";
	page.style.fontSize="22px";
	page.style.fontFamily="MV boli";
}
document.write('<div style="position:fixed; right: 10px; top:20px; color:#eee;">背景颜色<br><select name=bcolor id=bcolor onchange="javascript:document.body.style.background=this.options[this.selectedIndex].value;"><option style="background-color: #ffffff" value="#ffffff">白色</option><option style="background-color: #f6f6f6" value="#f6f6f6">银灰</option><option style="background-color: #e4ebf1" value="#e4ebf1">淡蓝</option><option style="background-color: #e6f3ff" value="#e6f3ff">蓝色</option> <option style="background-color: #eeeeee" value="#eeeeee">淡灰</option><option style="background-color: #eaeaea" value="#eaeaea">灰色</option>  <option style="background-color: #e4e1d8" value="#e4e1d8">深灰</option><option style="background-color: #e6e6e6" value="#e6e6e6">暗灰</option><option style="background-color: #eefaee" value="#eefaee">绿色</option><option style="background-color: #ffffed" value="#ffffed">明黄</option><option style="background-color: #333333" value="#333333">黑色</option></select><br>字体颜色<br><select name=txtcolor id=txtcolor onchange="javascript:document.getElementById(\'container\').style.color=this.options[this.selectedIndex].value;"> <option value="#000000">黑色</option><option value="#ff0000" style="color:red;">红色</option><option value="#006600" style="color:green;">绿色</option><option value="#0000ff" style="color:blue;">蓝色</option><option value="#660000" style="color:#006600;">棕色</option><option value="#ffffff">白色</option></select><br>字体大小<br><select name=fontsize id=fonttype onchange="javascript:document.getElementById(\'container\').style.fontSize=this.options[this.selectedIndex].value;"> <option value="12px" >小号</option> <option value="14px" >较小</option> <option value="19px" >中号</option> <option value="19px" >默认</option><option value="22px" >较大</option><option value="25px" >大号</option><option value="35px" >35px</option><option value="45px" >45px</option><option value="55px" >55px</option><option value="65px" >65px</option><option value="75px" >75px</option><option value="85px" >85px</option><option value="95px" >95px</option></select>><br>字体类型<br><select name=fonttype id=fonttype onchange="javascript:document.getElementById(\'container\').style.fontFamily=this.options[this.selectedIndex].value;"> <option value="宋体" >宋体</option> <option value="MV boli" style="font-family:MV boli">MV boli</option> <option value="隶书" style="font-family:隶书">隶书</option> <option value="黑体" style="font-family:黑体">黑体</option><option value="楷体" style="font-family:楷体">楷体</option><option value="幼圆" style="font-family:幼圆">幼圆</option><option value="华文中宋" style="font-family:华文中宋">华文中宋</option><option value="华文行楷" style="font-family:华文行楷">华文行楷</option><option value="微软雅黑" style="font-family:微软雅黑">微软雅黑</option><option value="Arial" style="font-family:Arial">Arial</option><option value="Vrinda" style="font-family:Vrinda">Vrinda</option><option value="Tahoma" style="font-family:Tahoma">Tahoma</option><option value="Courier" style="font-family:Courier">Courier</option><option value="Times" style="font-family:Times">Times</option><option value="Georgia" style="font-family:Georgia">Georgia</option><option value="Lucida" style="font-family:Lucida">Lucida</option></select><br><a onClick="changePage()" target="_self" id="changepage">黑底白字</a></div>');   
</script>
<style type="text/css">
#tbrowser a:linked container a:visited{
	font-size:18px;
	text-decoration:none;
}
a:link{
	text-decoration:none;
	}
#container{
	font-size:1.2em;
	margin:auto;
	font-family:"宋体";
	width:65.29%;
	line-height:1.6em;
}
P{
	margin-top:16px;
	margin-bottom:16px;
	text-indent:2em;
}
.uls{
	color:#CC6666;
	font-weight:bold;
}
.uls>ol{
	list-style:none;
	font-weight:normal;
	list-style:lower-latin;
	color:#000000;
	line-height:1.3em;
}
h3{
	font-size:1.1em;
	font-weight:bold;
	text-indent:0em;
	color:#990000;
}
h4{
	font-size:1.0em;
	font-weight:bold;
	text-indent:0em;
}

#goTopBtn, #goBottom, #shangy, #xiay, #ftsize1, #ftsize2, #ftsize3{
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    font-size: 12px;
    text-align: center;
    position: fixed;
	right: 10px;
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
	font-weight:bold;
}
#goTopBtn, #goBottom, #ftsize1, #ftsize3  {
    background-color:#999;
    color:#000;
}
#shangy, #xiay, #ftsize2{
    background-color: #bbb;
    color: #000;
}
#ftsize1{
	bottom:240px;
}
#ftsize2{
	bottom:214px;
}
#ftsize3{
	bottom:188px;
}

#goTopBtn{
    bottom: 105px;
}
#goBottom {
    bottom: 30px;
}
#shangy {
    bottom: 80px;
}
#xiay {
    bottom: 55px;
}
#goTopBtn:hover, #goBottom:hover, #shangy:hover, #xiay:hover, #ftsize1:hover, #ftsize2:hover, #ftsize3:hover{
	background-color:#ccc;
	border:#ccc 0px solid;
}
#goTopBtn a:link, #goBottom a:link, #xiay a:link, #shangy a:link, #ftsize1 a:link, #ftsize2 a:link, #ftsize3 a:link {
	text-decoration: none;
	color:white;
}
img{
	margin-right:2em;
	text-indent:2em;
	border:0;
}
.picsay{
	color:#930;
	font-size:90%;
	line-height:110%;
	margin-top:-12px;
	padding:0;
}
.remark{
	color:#930;
	font-size:90%;
	line-height:140%;
	margin-top:-12px;
	text-indent:0em;
	padding:0;
}
.ref{
	color:#930;
	font-size:95%;
	line-height:150%;
	margin-top:-12px;
	text-indent:2em;
	padding:0;
}
pre{
	font-size:120%;
	line-height:130%;
	padding:0;
	//background-color:#f6f6f6;
	//background-color:#fff5ee;
	//background-color:#ffe;
	background-color:#eee;
	padding:8px;
	}
.code0, .code2, .code4{
	font-size:95%;
	line-height:110%;
	margin-top:-12px;
	padding:0;
	//background-color:#D9D1CA;
	//background-color:#f6f6f6;
	//background-color:#fff5ee;
	background-color:#ffe;
}
.code0{
	color:red;
	text-indent:0em;
}
.code2{
	color:#930;
	text-indent:2em;
}
.code4{
	color:blue;
	text-indent:4em;
}
sub,sup{
	font-size:80%;
	color:red;
}
</style>
</head>

<body>

<div id="container">


<p>在C++中，每个程序都需要用到几个变量在写程序前就应该知道，每个数组有几个元素也必须在写程序时就决定。有时在编程序时，我们并不知道需要多大的数组或需要多少变量，直到程序开始运行，根据某一个当前运行值才能决定。</p>
<p>(或者通过交互确定。)</p>
<p>在定义数组时，我们建议按最大的可能值定义数组，每次运行时使用数组的一部分元素，当元素个数变化不是很大时，这个方案是可行的；但如果元素个数的变化范围很大时，就太浪费空间了。</p>

<p>这个问题一个更好的解决方案就是动态变量机制。所谓动态变量是指：在写程序时无法确定它们的存在，只有当程序运行起来时，随着程序的运行，根据程序的需求动态产生和消亡的变量。由于动态变量不能在程序中定义，也就无法给它们取名字，因此动态变量的访问需要通过指向动态变量的指针变量来进行间接访问；</p>

<p>要使用动态变量，必须定义一个相应类型的指针，然后通过动态变量申请的功能向系统申请一块空间，将空间的地址存入该指针变量。这样就可以间接访问动态变量了。当程序运行结束时，系统会自动回收指针占用的空间，但并不回收指针指向的动态变量的空间，动态变量的空间需要程序员在程序中地释放。因此要实现等实现动态内存分配，系统必须提供以下3个功能。</p>

<p>1 定义指针变量；</p>

<p>2 动态申请空间；</p>

<p>3 动态回收空间；</p>

<p>int *p</p>

<p>p = new int</p>

<p>*p =20</p>


<p>C++的new将返回一个指针；</p>

<p>new表示请求分配内存，并不能保证分配请求总能得到满足，因为这取决于系统的状态以及内存资源的可用性。</p>

<p>指针的作用：</p>

<p>1 使用堆中的内存；</p>

<p>2 作为函数参数，指针作为参数时属于地址引用，能完成值引用所不能完成的功能。</p>

<p>3 访问类的数据成员和成员函数；</p>


<p>C/C++这样的语言比较接近早期抽象计算机数据的思维方式，指针其实就是我们抽象数据并且这个数据是聚合但是实际内存离散的胶合层产物。后来出的语言通过其他的方式来抽象数据表示，将指针这个概念隐藏了，显得友好了，但是其实他还在那。</p>

<h4>C、C++为什么有指针这种数据类型？</h4>

<p>首先要理解几个概念：</p>

<p>1 存储程序的概念；数据要存得进去，取得出来，还要考虑空间的效率和时间的效率；</p>

<p>2 数据存储涉及到一个地址的概念，但如果将真正的地址呈现在你面前，类似于一个身份证号码的纯数字的东西，不方便记忆，也不够直观，所以在编程语言中弄出了变量、常量等标识符的概念，都用一个用一定涵义的标识符（如变量名）来表示，变量名与地址的映射由编译器或解释器配合操作系统来处理。</p>

<p>3 复杂的程序必须涉及到复杂的数据结构，也就是一定要考虑批量的数据处理。那数据元素的关系需要考虑。而存储到内存中，其实内存空间的地址是存在线性关系的，但变量名去把这个线性关系给弄没了。</p>

<p>例如，一块内存连续存了10个数据，这10个数据在内存地址上肯定存在线性关系，你如果知道了第一个数据的变量名，如果才能通过线性关系存取其他9个变量的数据呢？</p>

<p>这其实就是数组的概念，数组下标就是对内存地址线性关系的映射。</p>




<p>new(delete)与malloc(free)的主要区别是除了分配与释放内存，还会自动调用构造函数与析构函数。对于数组的操作，需要使用如delete [] stringParr;</p>
<p>符号[]是告诉编译器，我这里需要释放的是一个整个数组的指针，这样编译器就会逐个释放每个元素的内存占用。</p>



<p>使用malloc函数需要指定内存分配的字节数并且不能初始化对象，New会自动调用对象的构造函数。delete会调用对象的destructor，而free不会调用对象的destructor.</p>



<pre>
//为简单变量动态分配内存，并作初始化
#include &lt;iostream.h>
int main()
{ 
    int *p;
    p = new int(99);
    //动态分配内存，并将99作为初始化值赋给它
    cout&lt;&lt; *p;
    delete p;
    return 0;
}//new 不能初始化动态数组
</pre>

<p>p = new int(5);//申请单个空间，并赋默认值为5</p>

<p> q = new char[10]; //申请10个空间 </p>

<p>向量用法类似于数组，但向量长度不固定。如需更大容量来存储更多元素，它的容量就会自动扩充。向量在<vector>库中定义，位于std 命名空间。所以，在程序中使用向量需包括以下语句(或其他类似语句)：</p>

<p>#include &lt;vector></p>

<p>using namespace std;</p>

<p>给定了Base_Type(基类型)的向量类要写成vector<Base_Type>。下面是两个示范向量声明：</p>

<p>vector<int> v; // 默认构造函数生成一个空向量</p>

<p>vector<AClass> record(20); //用AClass 类的默认构造函数初始化20 个元素</p>

<p>在向量添加元素要用成员函数push_back，如下例所示：</p>

<p>v.push_back(42);</p>

<p>一个元素位置获得了它的第一个值之后(无论是通过push_back，还是通过构造函数来初始化)，以后就可使用方括号记号法来访问那个元素位置，和访问普通数组元素一样。</p>

<p>向量在任何时候都有一个容量，即当前分配了内存的元素的数量。成员函数capacity()返回向量的容量。不要混淆向量的容量和长度。长度是向量中元素的个数，容量是实际分配了内存的元素的个数。容量通常大于长度，且肯定大于或等于长度。</p>

<p>一旦向量容量不够，并需要空间来容纳一个附加成员，容量就会自动增加。不同C++实现对每次增加的容量有不同规定，但通常都会超过马上就要用到的容量。一个常见的方案是倍增当前需要的容量。由于增加容量是一项复杂的任务，所以相较于频繁分配许多小的内存块，一次性分配一个较大的内存块显得更有效率。</p>

<p>向量的长度是指向量中的元素个数，容量是当前实际分配了内存的元素的个数。对于向量v，可分别用成员函数v.size()和v.capacity()判断其长度和容量。</p>

<p>一般可忽略向量的容量，这不会对程序行为产生任何影响。但如果必须考虑效率问题，可考虑自己管理容量，而不是接受每次都使容量倍增的默认行为。可用成员函数reserve来显式增大向量的容量。例如以下语句将容量设为至少32 个元素：</p>

<p>v.reserve(32);</p>

<p>以下语句将容量设为向量当前元素个数加10：</p>

<p>v.reserve(v.size() + 10);</p>


<p>动态数组是写程序时不指定长度的数组，它的长度在程序运行时确定。</p>

<p>普通数组声明时必须指定长度。但有的时候，除非程序实际运行，否则不好确定长度。例如，数组可能容纳了一个学生ID 列表，但程序每次运行时，班级的学生数都可能发生变化。沿用传统做法，就必须预估数组可能的最大长度，并希望那个长度足够大，能适应所有情况。但这样做有两个问题。首先，你估计的长度可能还是太小，造成程序不能适应所有情况。其次，由于数组可能包含许多未使用的位置，所以会浪费计算机内存。动态数组避免了所有这些问题。用动态数组容纳学生ID，可在程序运行时输入班级的学生数。然后，程序会创建刚好那么大的动态数组。动态数组用操作符new 创建。和许多人想象的不同，动态数组的创建和使用其实非常简单。由于数组变量其实就是指针变量，所以可以用操作符new 创建被用作数组的动态变量，并像使用普通数组那样使用动态数组变量。例如，以下语句创建一个动态数组变量，其中含有10 个double 类型的数组元素：</p>

<p> oduble*  p;</p>

<p>p = new double[10];</p>

<p>由于程序马上就要终止，所以并不是真的需要这个delete 语句。但如果程序准备用动态变量做其他事情，就应该包括这个delete 语句，将动态数组占用的内存还给自由存储。为动态数组执行的delete 语句类似于以前介绍过的delete 语句，只是在动态数组的情况下，必须包括一对空的方括号，如下所示：</p>

<p>delete [] a;</p>

<p><strong>方括号告诉C++要销毁的是动态数组变量，所以系统会检查数组的长度，并删除刚好那么多的索引变量。如省略方括号，相当于告诉计算机只销毁一个int 类型的变量</strong>。例如：</p>

<p>delete a;</p>

<p>虽然上述语句不合法，但大多数编译器都检测不到这个错误。ANSI C++标准规定，这种情况下发生的事情是“未定义”的，意味着编译器的作者可以做他觉得方便的任何事情——</p>

<p>怎样使用动态数组? </p>

<p>声明指针变量 指针变量指向内存中的动态数组，并被用作动态数组名称：double * a;</p>

<p>调用new 使用操作符new 创建一个动态数组：a = new double[arraySize];动态数组长度在方括号内给出。可用int 变量或其他int 表达式给出长度。arraySize 可以是值在运行才确定的int 变量。</p>

<p>和普通数组一样使用 指针变量(比如a)可以像普通数组那样使用。例如，可采用标准方式书写索引变量，比如a[0]，a[1]，等等。不能再为指针变量赋其他任何指针值。相反，它应该像数组变量那样使用。</p>

<p>调用delete [] 用完动态数组后使用delete、一对空的方括号和指针变量来销毁动态数组，将其占用的内存还给自由存储以便重用。例如：delete [] a;</p>

<p>一个数组是一段连续的内存空间的命名，一个按上述流程在堆中申请的也是一段连续的内存空间，并也被赋值给了一个指针变量。</p>

<p>指针是内存地址，所以通过对变量在计算机内存中的地址进行命名，指针提供了一种间接的变量命名方式。</p>

<p>动态变量是程序运行时创建(和销毁)的变量。</p>

<p>动态变量要占用计算机内存的一个特殊区域，这个区域称为自由存储。程序结束动态变量的使用后，应该将动态变量占用的内存还给自由存储，以便重用；这是用delete 语句来完成的。</p>

<p>动态数组是其长度在程序运行时确定的数组。动态数组被实现为数组类型的动态变量。</p>









</div>


<div>
<a id="ftsizea" onclick='document.getElementById("container").style.fontSize = "1.4em";' target="_self" style="color:#fff;" title="大：1.4em"><div id="ftsize1" style="color:#fff;">大</div></a>
<a id="ftsizea" onclick='document.getElementById("container").style.fontSize = "1.2em";' target="_self" style="color:#fff;" title="中：1.2em"><div id="ftsize2" style="color:#fff;">中</div></a>
<a id="ftsizea" onclick='document.getElementById("container").style.fontSize = "1.0em";' target="_self" style="color:#fff;" title="小：1em"><div id="ftsize3" style="color:#fff;">小</div></a>

<a target="_self" style="color:#fff;"><div style="display:none; color:#fff;" id="goTopBtn">&and;</div></a>
<a onclick="shangy()" target="_self" style="color:#fff;"><div style="display:none; color:#fff;" id="shangy">&uarr;</div></a>
<a onclick="xiay()" target="_self" style="color:#fff;"><div id="xiay" style="color:#fff;">&darr;</div></a>
<a onclick="downn()" target="_self" style="color:#fff;"><div id="goBottom" style="color:#fff;">&or;</div></a>
<script type=text/javascript>
	goTopEx();
	function xiay(){
		window.scrollBy(0,window.innerHeight-10);
	}
	function shangy(){
		window.scrollBy(0,-window.innerHeight+10);
	}
	var obj3=document.getElementById("xiay");
	var obj4=document.getElementById("goBottom");
	function getHeight(){  
		if(browser4=="ch"){
			//谷歌浏览器
			return document.body.clientHeight; 
		}else{
			//IE、firefox等浏览器 
			return document.documentElement.clientHeight;  
		}  
	}
	getHeight()<window.innerHeight+50?obj3.style.display="none":obj3.style.display="";
	getHeight()<window.innerHeight+50?obj4.style.display="none":obj4.style.display="";
	if(browser4!="ch"){	//firefox需要尝一下才显示向下图标
		xiay();
		shangy();
	}
</script>
</div>

</body>
</html>

<!--
_____________________________________________________________________________________

1 段落替换
\s*<br />\s*
------------------
</p>

<p>
_____________________________________________________________________________________
2 汉字中间的空格替换：
([\u4e00-\u9fa5])\s+([\u4e00-\u9fa5])
([^\s\*^{}"^u4e00-u9fa5])\s+([^\s\*^{}"^u4e00-u9fa5])


------------------
$1$2
_____________________________________________________________________________________
3 段落前的空格替换
\s*</p>\s*
\s*<p>\s*
------------------
</p>

<p>
_____________________________________________________________________________________

4 把第和章两个字去掉
第(\S*)章
------------------
$1
_____________________________________________________________________________________

7 正则表达式参考：
https://www.toutiao.com/i6370960744082571778/
_____________________________________________________________________________________

8
<p class="picsay">
<p class="picsay">
<p class="code0">
<p class="code2">
<p class="code4">
_____________________________________________________________________________________
9 将标注序号更改为上标，红色，需一个个替换，英文html中有[1]
(\[\d\])
------------------
<sup>$1</sup>
_____________________________________________________________________________________
10 替换章不是以1-9。?！…”“结尾的段落
([^1-90。?！…”：？“章])</p>
<p>
------------------
$1
-->


