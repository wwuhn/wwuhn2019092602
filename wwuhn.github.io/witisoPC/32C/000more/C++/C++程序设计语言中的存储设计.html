<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base target="_blank" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script language="javascript"> 
//bg_even("表格ID属性名","奇数行背景色","偶数行背景色","鼠标经过背景色","点击后背景色");
function bg_even(o,a,b,c,d){
        var t=document.getElementById(o).getElementsByTagName("tr");
        for(var i=0;i<t.length;i++){
                t[i].style.backgroundColor=(t[i].sectionRowIndex%2==0)?a:b;
                t[i].onclick=function(){
                        if(this.x!="1"){
                                this.x="1";
                                this.style.backgroundColor=d;
                        }else{
                                this.x="0";
                                this.style.backgroundColor=(this.sectionRowIndex%2==0)?a:b;
                        }
                }
                t[i].onmouseover=function(){
                        if(this.x!="1")this.style.backgroundColor=c;
                }
                t[i].onmouseout=function(){
                        if(this.x!="1")this.style.backgroundColor=(this.sectionRowIndex%2==0)?a:b;
                }
        }
}

 
 function goTopEx(){
        var obj=document.getElementById("goTopBtn");
        function getScrollTop(){
                return document.documentElement.scrollTop;
            }
        function setScrollTop(value){
                document.documentElement.scrollTop=value;
            }    
        window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
        obj.onclick=function(){
            var goTop=setInterval(scrollMove,10);
            function scrollMove(){
                    setScrollTop(getScrollTop()/111);
                    if(getScrollTop()<1)clearInterval(goTop);
                }
        }
    }


 
 function goTopEx(){
        var obj=document.getElementById("goTopBtn");
        function getScrollTop(){
                return document.documentElement.scrollTop;
            }
        function setScrollTop(value){
                document.documentElement.scrollTop=value;
            }    
        window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
        obj.onclick=function(){
            var goTop=setInterval(scrollMove,10);
            function scrollMove(){
                    setScrollTop(getScrollTop()/111);
                    if(getScrollTop()<1)clearInterval(goTop);
                }
        }
    }


</script>
<title>C++程序设计语言中的存储设计</title>

<style type="text/css">
#tbrowser a:link，.container a:visited{
font-size:18px;
text-decoration:none;
}
.container{
font-size:1.2em;
margin:auto;
font-family:"宋体";
width:75.29%;
line-height:1.6em;
}
P{
margin:16px;
text-indent:2em;
}
.uls{
color:#CC6666;
font-weight:bold;
}
.uls>ol{
list-style:none;
font-weight:normal;
list-style:lower-latin;
color:#000000;
line-height:1.3em;

}
h2{
font-size:20px;
font-weight:bold;
margin-top:15px;
margin-bottom:0px;
text-indent:0em;
}
img{
margin-right:5px;
}
.fc{
color:red;
}

a:link {
	text-decoration: none;
}


a:visited {
	text-decoration: none;
}
a:hover {
	text-decoration: none;
}
a:active {
	text-decoration: none;
}


#goTopBtn {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color:#eee;
    color:#000;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 100px;
    _bottom: "auto";
    cursor: pointer;
    opacity: .6;
    filter: Alpha(opacity=30);
	opacity=.3;
}
 #goTopBtn:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 
 
#goBottom {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 70px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
}
#goBottom:hover{
background-color:white;
border:#ccc 1px solid;
color:red;
}
 
#tbrowser {
	width:100%;
	margin:auto;
	border-collapse:collapse;
font-family:"宋体";
	text-align:left;
	line-height:1.3em;
	table-layout:fixed;
}

#tbrowser th,#tbrowser td{
border:1px solid #ddd;
font-size:1em;
color:#000000;
text-align:left;
font-family: "宋体";
vertical-align:top;
padding-left:3px;
}
.tbrowser2 td{
border:1px solid #ddd;
font-size:1em;
color:#000000;
text-align:center;
font-family: "宋体";
vertical-align:top;
padding-left:3px;
}

#tbrowser thead th{
border-bottom:2px solid #3d580b;
background-color:#8fc629;
color:#fff;
padding:5px 0px;
}
#tbrowser .nd{
border-bottom:2px solid #3d580b;
background-color:#8fc629;
background-color:#D3D3A9;
color:red;
}

#tbrowser th{
border-bottom:2px solid #3d580b;
background-color:#8fc629;
color:#fff;
padding:5px 0px;
}
#tbrowser th.title{
background-color:#e3e685;
}

#tbrowser caption{
font-weight:bold;
padding:1px 0px;
color:#3d580b;
font-size:18px;
}


#tbrowser .xhx{
border-bottom:0px solid #aaa;
}


#tbrowser tr{
height:6px;
}

#tbrowser tr>td{/*1*/
font-size:1em;
text-align:left;
/*width:13%;*/
}
#tbrowser tr>td+td{/*2*/
text-align:left;
/*width:8%;*/
font-size:1em;
}
#tbrowser tr>td+td+td{/*3*/
font-size:1em;
/*width:5%;*/
}
#tbrowser tr>td+td+td+td{/*4*/
font-size:1em;
text-align:left;
/*width:6%;*/
}
#tbrowser tr>td+td+td+td+td{/*5*/
font-size:1em;
text-align:left;
/*width:5%;*/
}
#tbrowser tr>td+td+td+td+td+td{/*6*/
/*width:13%;*/
font-size:1em;
}
#tbrowser tr>td+td+td+td+td+td+td{/*7*/
/*width:59%;*/
font-size:1em;
}


#tbrowser tfoot td{
border-width:0px;
text-align:left;
line-height:18px;
font-size:16px;
color:#777;
}
.floatr{
float:right;
padding-right:5px;
}

#tbrowser th a:link {
	text-decoration: none;
	color:white;
}
#tbrowser th a:hover {
	text-decoration: none;
	color:white;
}
#tbrowser th a:active {
	text-decoration: none;
	color:white;
}
#tbrowser th a:visited {
	text-decoration: none;
	color:white;
}
#tbrowser caption{
font-size:1.2em;
text-align:left;
}
#tbrowser thead td{
font-size:0.8em;
text-align:left;
}
img{
border:0;
}
.picsay{
color:#930;
font-size:90%;
line-height:110%;
margin-top:-12px;
padding:0;
}
.code0{
color:red;
font-size:90%;
line-height:110%;
margin-top:-12px;
padding:0;
text-indent:0em;
}
.code2{
color:#930;
font-size:90%;
line-height:110%;
margin-top:-12px;
padding:0;
text-indent:2em;
}
.code4{
color:blue;
font-size:90%;
line-height:110%;
margin-top:-12px;
padding:0;
text-indent:4em;
}
sub,sup{
font-size:80%;
color:red;
}
</style>
</head>

<body>
<div class="container">
<!--
<table id="tbrowser">
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
-->

<!--
height="*\w*"
width="*\w*"
</p>
<p>
-->
<p>程序中，在数据声明中定义的变量和数组，它们存储在静态存储区或者动态存储区，其空间由系统负责分配，最终也由系统负责回收，分配时机和回收时机用户无法控制。另外，它们都有自己的名字（因为定义时有命名），程序中可以通过变量名或数组名访问它们。</p>
<p>而“动态分配”的变量或数组，分配时机和释放时机可完全由程序员自己决定。另外，“动态分配”的空间，由于没有数据分明，因此这部分空间没有名字，无法像使用变量或数组那样通过变更名或数组名引用其中的数据，只能通过指针变量来访问。</p>
<p>对于数据在内存中的存储，C语言提供了3种策略，即静态分配、自动分配（栈式分配）和动态分配。</p>
<p>1 静态分配：静态分配由编译器自动分配和释放，在编译时就确定了运行时变量在内存中的位置。这种性质允许变量在整个程序的运行过程中都不消失。在C语言中使用关键字static来定义静态变量（可以是静态局部变量、静态全局变量或者在所有函数外面定义的全局变量）。</p>
<p>&nbsp;</p>
<p>静态存储区是指存储单元在程序运行的整个过程中一直分配给某些变量，这些变量一直“静静地”占有这些单元，一直都不释放，直到程序运行结束。</p>
<p>2 自动内存分配（在栈上分配）：自动分配同样也是由编译器自动分配和释放，在编译时并不确定变量在内存中的位置，而是在调用函数时给变量分配空间，函数返回时释放空间。C编译器通过系统栈来管理这样的变量。在C语言中，auto型变量是通过栈来管理的，不需要人为管理。</p>
<p>动态存储区是指存储单元在程序运行的不同时间可以分配不同的数据。需要时开辟单元，不需要时就释放该单元。这样某单元就可以在不同的时间分配给不同的变量，如函数里auto类型的局部变量就是这样，调用函数时，分配变量空间，退出函数时释放该空间。再调用时，再开辟...</p>
<p>3 动态内存分配（在堆上分配）：动态分配是指在程序运行过程中动态申请内存的方法。这样的内存空间是从一个叫做堆的空间申请的，申请的空间是一段连续的内存空间。不需要该内存空间时，应该人为释放它，否则会导致内存资源的浪费。</p>
<p>内存中有一块称为“堆”(heap)的存储区，程序可以根据需要随时用stdlib.h提供的malloc()等函数在堆中申请一部分空间来存储数据，当不需要时又可以随时用free()函数释放。这种根据需要随时开辟、随时释放的内存分配方式，称为动态内存分配。</p>
<p>C语言中malloc()大体的实现是，从操作系统一次性地取得比较大的内存，然后将这些内存“零售”给应用程序。</p>
<table id="tbrowser" class="tbrowser2">
  <tr>
    <td  style="text-align:center;" rowspan="3">堆区<br />
      动态内存分配</td>
    <td style="text-align:center;">全局区</td>
    <td style="text-align:center;">静态区</td>
    <td style="text-align:center;" rowspan="3">栈区<br />
      auto型变量<br />
      (内存重复使用)</td>
  </tr>
  <tr>
    <td style="text-align:center;" colspan="2">常量(只读)</td>
  </tr>
  <tr>
    <td style="text-align:center;" colspan="2">代码区(只读)</td>
  </tr>
</table>
<p>（内存分配中的堆和栈与数据结构的堆和栈有本质的区别。）</p>
<p>C语言的变量有两种属性：数据类型和存储类型。存储类型标识符有：auto,extern,static,register。用来说明变量在计算机中不同的存储形态，包括存储位置、作用域和生存期。</p>
<table id="tbrowser">
  <tr>
    <td>要多少</td>
    <td>具体在哪里</td>
    <td>给谁用</td>
    <td>何时给</td>
    <td>用多久</td>
  </tr>
  <tr>
    <td>数据类型</td>
    <td>数据地址</td>
    <td>作用域</td>
    <td>内存分配</td>
    <td>生存期</td>
  </tr>
  <tr>
    <td>字节数量</td>
    <td>&nbsp;</td>
    <td>作用的代码范围</td>
    <td>&nbsp;</td>
    <td>从单元开辟到释放</td>
  </tr>
</table>
<p>函数调用时，主调函数的实参是准备好的具体数值，形参是函数调用时才开辟单元的变量。</p>
<p>在编写程序时，要告诉计算机这些数据的存储位置。变量的存储类型的功能之一就是确定该变量是存放在动态数据区、静态存放区还是寄存器中。</p>
<table id="tbrowser">
<col width="13%" />
<col width="12%" />
<col width="30%" />
<col width="45%" />
  <tr>
    <td colspan="2">内存区</td>
    <td>存储的内容</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td colspan="2">程序区</td>
    <td>程序代码</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td rowspan="3">数据区</td>
    <td>静态存储区</td>
    <td>全局变量、静态局部变量</td>
    <td>编译阶段初始化，且只赋值一次，对静态局部变量多次调用时，每次在前一次的结果上进行。</td>
  </tr>
  <tr>
    <td>动态存储区(栈区)</td>
    <td>局部动态变量、形参</td>
    <td>在进入它们的函数或复合语句时才初始化，相当于赋值语句。每调用一次，就重新赋值一次。</td>
  </tr>
  <tr>
    <td>动态分配区<br />
      (栈区)</td>
    <td>动态数据</td>
    <td>程序运行时与用户交互完成。</td>
  </tr>
  <tr>
    <td colspan="4">（数据还可以存放在寄存器中）</td>
    </tr>
</table>
<p>&nbsp;</p>
<table id="tbrowser">
<col width="13%" />
<col width="12%" />
<col width="45%" />
<col width="30%" />

  <tr>
    <td colspan="2">变量存储类型</td>
    <td>作用域</td>
    <td>生存期</td>
  </tr>
  <tr>
    <td rowspan="2">auto</td>
    <td>局部变量</td>
    <td>所定义函数内部</td>
    <td>所定义函数运行期间</td>
  </tr>
  <tr>
    <td>全部变量</td>
    <td>所定义之处到本源文件结束</td>
    <td>程序运行的整个过程</td>
  </tr>
  <tr>
    <td rowspan="2">static</td>
    <td>局部变量</td>
    <td>所定义函数内部</td>
    <td>程序运行的整个过程</td>
  </tr>
  <tr>
    <td>全部变量</td>
    <td>所定义之处到本源文件结束，限于本文件</td>
    <td>程序运行的整个过程</td>
  </tr>
  <tr>
    <td>register</td>
    <td>局部变量</td>
    <td>所定义函数内部</td>
    <td>所定义函数运行期间</td>
  </tr>
  <tr>
    <td>extern</td>
    <td>全部变量</td>
    <td>所定义之处到本源文件结束</td>
    <td>程序运行的整个过程</td>
  </tr>
</table>
<p></p>
<p>&nbsp;</p>
</div>
<a name="bottom" id="bottom"></a>
<DIV style="DISPLAY: none" id=goTopBtn>&and;</DIV>
<div id="goBottom"><a href="#bottom" target="_self">&or;</a></div>
<SCRIPT type=text/javascript>goTopEx();</SCRIPT>
</body>
</html>
<script language="javascript"> 
bg_evensssss("tbrowser","#fff","#F5F5F5","#FFFFCC","#FFDDFF");/*#FFFF84*/
</script>


<!--
_____________________________________________________________________________________

1 段落替换：
\s*<br />\s*
------------------
</p>

<p>
_____________________________________________________________________________________
2 汉字中间的空格替换：
([^\s\*^{}"^u4e00-u9fa5])\s+([^\s\*^{}"^u4e00-u9fa5])
------------------
$1$2
_____________________________________________________________________________________
3 段落前的空格替换
[\s*</p>\s*]
[\s*<p>\s*]
------------------
</p>

<p>

<p class="picsay">
<p class="picsay">
<p class="code0">
<p class="code2">
<p class="code4">
_____________________________________________________________________________________
-->



