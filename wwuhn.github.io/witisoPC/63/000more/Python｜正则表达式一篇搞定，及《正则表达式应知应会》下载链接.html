<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base target="_blank" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<script type="text/javascript">
var userAgent = navigator.userAgent.toLowerCase();
var browser = 
	(browser = userAgent.match(/qqbrowser\/([\d.]+)/))?"qqbrowser/"+browser[1]:
	(browser = userAgent.match(/se\s+2.x/))?"sogou/2.x": //sougou
	(browser = userAgent.match(/msie\s+([\d.]+)/))?"msie/"+browser[1]: //ie
	(browser = userAgent.match(/chrome\/([\d.]+)/))?"chrome/"+browser[1]: //chrome
	(browser = userAgent.match(/firefox\/([\d.]+)/))?"firefox/"+browser[1]: //firefox
	(browser = userAgent.match(/version\/([\d.]+)\s+safari\/([\d.]+)/))?"safari/"+browser[1]: //safari
	(browser = userAgent.match(/opera\/([\d.]+)([\w\W]+)version\/([\d.]+)/))?"opera/"+browser[3]: //opera
	"other browser";
	var browser4 = browser.substr(0,2);
//实现回到页面顶部  
function goTopEx(){  
	var obj=document.getElementById("goTopBtn"); 
	var obj2=document.getElementById("shangy"); 
	var obj3=document.getElementById("xiay");
	var obj4=document.getElementById("goBottom");  
	
	function getScrollTop(){  
		if(browser4=="ch"){
			//chrome
			//chrome63.0.3239.132对DTD XHTML 1.0不再支持body.scrollTop属性，只支持documentElement.scrollTop 
			return document.documentElement.scrollTop; 
		}else{
			//IE、firefox
			return document.documentElement.scrollTop;  
		}  
	}
	function setScrollTop(value){ 
		if(browser4=="ch"){ 
			//chrome
			document.documentElement.scrollTop=value; 
		}else{  
			//IE、firefox
			document.documentElement.scrollTop=value;  
		} 
	}     
	window.onscroll=function(){getScrollTop()>50?obj.style.display="":obj.style.display="none";
	getScrollTop()>100?obj2.style.display="":obj2.style.display="none";
	document.body.clientHeight-getScrollTop()>650?obj3.style.display="":obj3.style.display="none";
	document.body.clientHeight-getScrollTop()>650?obj4.style.display="":obj4.style.display="none";
	}  
	obj.onclick=function(){  
		var goTop=setInterval(scrollMove,10);  
		function scrollMove(){  
				setScrollTop(getScrollTop()/1.1);  
				if(getScrollTop()<1)clearInterval(goTop);  
		}  
	}  
}  
function downn(){
	if(browser4=="ch"){
		//chrome
		window.scrollBy(0,document.body.clientHeight);
	}else{
		//IE、firefox
		window.scrollBy(0,document.documentElement.clientHeight*1000); 
	}
}
</script>
<script>
function changePage(){ 
	var page = document.getElementById("container");
	page.style.background="black";
	page.style.color="white";
	page.style.fontSize="22px";
	page.style.fontFamily="MV boli";
}
document.write('<div style="position:fixed; right: 10px; top:20px; color:#eee;">背景颜色<br><select name=bcolor id=bcolor onchange="javascript:document.body.style.background=this.options[this.selectedIndex].value;"><option style="background-color: #ffffff" value="#ffffff">白色</option><option style="background-color: #f6f6f6" value="#f6f6f6">银灰</option><option style="background-color: #e4ebf1" value="#e4ebf1">淡蓝</option><option style="background-color: #e6f3ff" value="#e6f3ff">蓝色</option> <option style="background-color: #eeeeee" value="#eeeeee">淡灰</option><option style="background-color: #eaeaea" value="#eaeaea">灰色</option>  <option style="background-color: #e4e1d8" value="#e4e1d8">深灰</option><option style="background-color: #e6e6e6" value="#e6e6e6">暗灰</option><option style="background-color: #eefaee" value="#eefaee">绿色</option><option style="background-color: #ffffed" value="#ffffed">明黄</option><option style="background-color: #333333" value="#333333">黑色</option></select><br>字体颜色<br><select name=txtcolor id=txtcolor onchange="javascript:document.getElementById(\'container\').style.color=this.options[this.selectedIndex].value;"> <option value="#000000">黑色</option><option value="#ff0000" style="color:red;">红色</option><option value="#006600" style="color:green;">绿色</option><option value="#0000ff" style="color:blue;">蓝色</option><option value="#660000" style="color:#006600;">棕色</option><option value="#ffffff">白色</option></select><br>字体大小<br><select name=fontsize id=fonttype onchange="javascript:document.getElementById(\'container\').style.fontSize=this.options[this.selectedIndex].value;"> <option value="12px" >小号</option> <option value="14px" >较小</option> <option value="19px" >中号</option> <option value="19px" >默认</option><option value="22px" >较大</option><option value="25px" >大号</option><option value="35px" >35px</option><option value="45px" >45px</option><option value="55px" >55px</option><option value="65px" >65px</option><option value="75px" >75px</option><option value="85px" >85px</option><option value="95px" >95px</option></select>><br>字体类型<br><select name=fonttype id=fonttype onchange="javascript:document.getElementById(\'container\').style.fontFamily=this.options[this.selectedIndex].value;"> <option value="宋体" >宋体</option> <option value="MV boli" style="font-family:MV boli">MV boli</option> <option value="隶书" style="font-family:隶书">隶书</option> <option value="黑体" style="font-family:黑体">黑体</option><option value="楷体" style="font-family:楷体">楷体</option><option value="幼圆" style="font-family:幼圆">幼圆</option><option value="华文中宋" style="font-family:华文中宋">华文中宋</option><option value="华文行楷" style="font-family:华文行楷">华文行楷</option><option value="微软雅黑" style="font-family:微软雅黑">微软雅黑</option><option value="Arial" style="font-family:Arial">Arial</option><option value="Vrinda" style="font-family:Vrinda">Vrinda</option><option value="Tahoma" style="font-family:Tahoma">Tahoma</option><option value="Courier" style="font-family:Courier">Courier</option><option value="Times" style="font-family:Times">Times</option><option value="Georgia" style="font-family:Georgia">Georgia</option><option value="Lucida" style="font-family:Lucida">Lucida</option></select><br><a onClick="changePage()" target="_self" id="changepage">黑底白字</a></div>');   
</script>
<style type="text/css">
#tbrowser a:linked container a:visited{
	font-size:18px;
	text-decoration:none;
}
a:link{
	text-decoration:none;
	}
#container{
	font-size:1.2em;
	margin:auto;
	font-family:"宋体";
	width:65.29%;
	line-height:1.6em;
}
P{
	margin-top:16px;
	margin-bottom:16px;
	text-indent:2em;
}
.uls{
	color:#CC6666;
	font-weight:bold;
}
.uls>ol{
	list-style:none;
	font-weight:normal;
	list-style:lower-latin;
	color:#000000;
	line-height:1.3em;
}
h2{
	font-size:20px;
	font-weight:bold;
	margin-top:15px;
	margin-bottom:0px;
	text-indent:0em;
}

#goTopBtn, #goBottom, #shangy, #xiay, #ftsize1, #ftsize2, #ftsize3{
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    font-size: 12px;
    text-align: center;
    position: fixed;
	right: 10px;
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
	font-weight:bold;
}
#goTopBtn, #goBottom, #ftsize1, #ftsize3  {
    background-color:#999;
    color:#000;
}
#shangy, #xiay, #ftsize2{
    background-color: #bbb;
    color: #000;
}
#ftsize1{
	bottom:240px;
}
#ftsize2{
	bottom:214px;
}
#ftsize3{
	bottom:188px;
}

#goTopBtn{
    bottom: 105px;
}
#goBottom {
    bottom: 30px;
}
#shangy {
    bottom: 80px;
}
#xiay {
    bottom: 55px;
}
#goTopBtn:hover, #goBottom:hover, #shangy:hover, #xiay:hover, #ftsize1:hover, #ftsize2:hover, #ftsize3:hover{
	background-color:#ccc;
	border:#ccc 0px solid;
}
#goTopBtn a:link, #goBottom a:link, #xiay a:link, #shangy a:link, #ftsize1 a:link, #ftsize2 a:link, #ftsize3 a:link {
	text-decoration: none;
	color:white;
}
img{
	margin-right:2em;
	text-indent:2em;
	border:0;
}
.picsay{
	color:#930;
	font-size:90%;
	line-height:110%;
	margin-top:-12px;
	padding:0;
}
.remark{
	color:#930;
	font-size:90%;
	line-height:140%;
	margin-top:-12px;
	text-indent:0em;
	padding:0;
}
.ref{
	color:#930;
	font-size:95%;
	line-height:150%;
	margin-top:-12px;
	text-indent:2em;
	padding:0;
}
pre{
	font-size:120%;
	line-height:130%;
	padding:0;
	//background-color:#f6f6f6;
	//background-color:#fff5ee;
	//background-color:#ffe;
	background-color:#eee;
	padding:8px;
	}
.code0, .code2, .code4{
	font-size:95%;
	line-height:110%;
	margin-top:-12px;
	padding:0;
	//background-color:#D9D1CA;
	//background-color:#f6f6f6;
	//background-color:#fff5ee;
	background-color:#ffe;
}
.code0{
	color:red;
	text-indent:0em;
}
.code2{
	color:#930;
	text-indent:2em;
}
.code4{
	color:blue;
	text-indent:4em;
}
sub,sup{
	font-size:80%;
	color:red;
}
</style>
</head>

<body>

<div id="container">





<h4>﻿Python｜正则表达式一篇搞定，及《正则表达式应知应会》下载链接</h4>

<p>小智雅汇 2018-08-05 10:37</p>

<p>正则表达式是用来描述字符串规则的字符串，也就是用字符串（描述规则）来匹配字符串（待匹配的字符串），并返回匹配的结果（匹配成功的逻辑值或匹配到的子字符串）。</p>

<p>已保存</p>

<p>正则表达式是处理字符串的强大工具。</p>

<p>绝大多数编程语言都支持正则表达式，语法也是大同小异。</p>

<p>一般的匹配流程：</p>

<p>正则表达式文本←逐个字符匹配→需要匹配的文本→返回匹配结果；</p>

<p>在正则表达式中，有特殊用途表示一定规则的字符称为元字符（.\()[]{}+-!$^*），元字符以外的字符称为普通字符。普通字符串可以匹配自身，如src，即匹配src。如果是要将元字符当做普通字符使用，前面要加\字符，字符\后跟的元字符转变为普通字符字符。（数字或部分字母前加\表示特殊的元字符，用来表示控制字符，如\n表示换行，或特殊的类别，如\d表示数字类）</p>

<p>1 基本元字符</p>

<p>1.1 . 匹配除\r\n之外的任何单个字符；</p>

<p>1.2 | 逻辑或操作，前后可以是单个字符也可以是逻辑分组（具体见后面的介绍）；</p>

<p>1.3 \ 转义字符（包括两方法，后面跟元字符，将元字符转为普通字符，后面跟字母，表示特殊的元字符。）</p>

<p>如果使用r前缀，就可以不用考虑转义的问题了，它标识了字符串是一个原生字符串，如：r'D:\test\test.txt'</p>

<p>2 字符集合（单个匹配）</p>

<p>[] 表示一个字符集合，匹配包含的每一个字符（只匹配需要匹配的字符串中的一个）；</p>

<p>2.1 [] 内列举元素，如[abcdewxyz]，可以匹配一个其中的任一字符；</p>

<p>2.2 []内使用连字符-，因为在我们使用的字符集如ASCII、Unicode中的数字、大写字母、小写字母、汉字都是连续编码的:</p>

<p>对于字符集中连续编码的字符可以使用连字符，如用[0-9]表示0-9十个数字的列举，可以匹配其中的任一个数字。如[abcdewxyz]可以写成[a-ew-z]</p>

<p>2.3 []内部的最前面使用^，如[^xyz]，表示字符集取反，匹配不包含列举的字符以外的任一字符；</p>

<p>在某些情况下，普通字符组与”|”匹配效果是一样的，如[abc]与a|b|c</p>

<p>3 预定义字符集（可以写在字符集[…]中，由\加一个字母或数字构成）</p>

<p>3.1 \d匹配一个数字，等价于[0-9]，如a\dc可以匹配a0c或a1c或a9c等；</p>

<p>3.2 \D匹配一个非数字字符，等价于[^0-9]，如a\Dc可以匹配abc或adc等，只要中间字符不是数字即可；</p>

<p>3.3 \s匹配任何一个不可见字符，包括换页符、换行符、回车符、制表符、垂直制表符及空格等。等价于[ \f\n\r\t\v]</p>

<p>3.4 \S匹配任何一个可见字符，等价于[^ \f\n\r\t\v]</p>

<p>3.5 \w匹配任何一个包括下划线在内的大小写字母、数字、汉字等字符（非标点、非运算符），这里的单词字符使用Unicode字符集；</p>

<p>3.6 \W匹配任何一个非字母、数字、汉字字符（标点、运算符）；</p>

<p>3.7 \x匹配一个十六进制数字，在字符集ASCII或Unicode中表示特定的字符；</p>

<p>3.8 \num匹配一个八进制数字（num表示1-4位的数字）；</p>

<p>3.9 \U匹配Unicode字符集中的一个字符；</p>

<p>import re</p>

<p>str = 'abc?.^ijk<>=*xyz'</p>

<p>#restr = re.compile(r'\W*') # 编译的话在重复使用时提高速度</p>

<p>restr = '\w+'</p>

<p>print(re.search(restr,str)[0])</p>

<p>restr = '\W+'</p>

<p>print(re.search(restr,str)[0])</p>

<p>'''</p>

<p>abc</p>

<p>?.^</p>

<p>'''</p>

<p>4 数量词（重复匹配，用在字符、[…]、(…)之后）</p>

<p>前面的元字符都只能匹配单个字符，如果要将正则表达式描述的单个字符匹配多次，则需要在此元字符后加上数量词，表示匹配前面字符（单个）的次数（前面提到的匹配都是匹配单个字符）。</p>

<p>4.1 *表示匹配前面字符任意次（0次或多次）；</p>

<p>4.2 +表示匹配前面字符一次或多次；</p>

<p>4.3 ?表示匹配前面字符零次或一次；</p>

<p>4.4 使用{}表示具体的次数或次数区间；</p>

<p>4.4.1 {n}，n是一个非负整数，匹配确定的n次；</p>

<p>4.4.2 {n,}，表示至少匹配n次；</p>

<p>4.4.3 {n,m}，表示匹配n-m次；</p>

<p>4.5 数量词的贪婪模式与非贪婪模式（防止过度匹配）</p>

<p>Python里数量词（*、+、{n,}）默认总是尝试匹配尽可能多的字符，也就是使用贪婪模式。非贪婪模式（在数量词后使用问号?）则相反，总是尝试匹配尽可能少的字符。</p>

<p>import re</p>

<p>str ="……<div>contents1</div><div>contents2</div>……"</p>

<p>res = r'<div>.*</div>' # 默认的贪婪模式</p>

<p>print(re.findall(res,str)[0])</p>

<p>res = r'<div>.*?</div>' # 使用非贪婪模式</p>

<p>print(re.findall(res,str)[0])</p>

<p>'''</p>

<p><div>contents1</div><div>contents2</div></p>

<p><div>contents1</div></p>

<p>'''</p>

<p>数量词（*、+、{n,}）后面再跟字符，后面的字符相当于边界限定，如 r'<div>.*</div>'，如果后面的</div>有多个，则会贪婪匹配到最后的</div>，但如果在数量词（*、+、{n,}）后加问号?，则是非贪婪匹配，如 r'<div>.*></div>'，匹配到第一个</div>则停止。</p>

<p>4.6 在正则表达式中，可以使用()对其分组（可以嵌套），()内的字符串称为子表达式，可以做为一个整体考虑，后面如果跟数量词，表示将()内的整体匹配规定的次数。</p>

<p>5 边界（位置）匹配（不消耗待匹配字符串中的字符）</p>

<p>5.1 字符串边界</p>

<p>5.1.1 ^匹配输入字符串的开始位置；如果设置RegExp对象的Mutliline属性，^也匹配\n或\r之后的位置；</p>

<p>5.1.2 $匹配输入字符串的结束位置；如果设置RegExp对象的Mutliline属性，^也匹配\n或\r之前的位置；</p>

<p>5.1.3 \A仅匹配字符串开头；</p>

<p>5.1.4 \Z仅匹配字符串末尾；</p>

<p>5.2 英文单词边界</p>

<p>5.2.1 \b匹配单词边界，如er\b匹配never go的er，不匹配verb的er；</p>

<p>5.2.2 \B匹配非单词边界，与\b相反；</p>

<p>6 逻辑分组与回溯引用</p>

<p>使用小括号()可将正则表达式分组（group），并且将匹配这个表达式的字符串保存到一个临时区域（最多9个），它们可以在正则表达式中用/1到/9的符号引用。（在dreamweaverk ，还可以用$1到$9的符号跨模式引用，即在查找中使用有逻辑分组的正则表达式，在替换在使用$1的回溯引用。）</p>

<p>import re</p>

<p>str = 'aabcabc123b'</p>

<p>restr = "(abc){2}"</p>

<p>print(re.search(restr,str)[0])</p>

<p>str = 'aabcabc123b'</p>

<p>restr = "(?P<id>abc){2}"</p>

<p>print(re.search(restr,str)[0])</p>

<p>'''</p>

<p>abcabc</p>

<p>abcabc</p>

<p>'''</p>

<p>逻辑分组与逻辑或及分组嵌套：</p>

<p>import re</p>

<p>str="ping 12.159.46.222"</p>

<p>res = r'(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5]))\.){3}'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>'''12.159.46.'''</p>

<p>分组的回溯引用：</p>

<p>import re</p>

<p>str="this is a block of of test,several are are repeated!"</p>

<p>res = r'[ ]+(\w+)[ ]+\1'</p>

<p>s = re.search(res,str)</p>

<p>print(s)</p>

<p>res = r'[ ]+(\w+)[ ]+(\1)'</p>

<p>t = re.findall(res,str)</p>

<p>print(t)</p>

<p>'''</p>

<p><_sre.SRE_Match object; span=(15, 21), match=' of of'></p>

<p>[('of', 'of'), ('are', 'are')]</p>

<p>'''</p>

<p>使用小括号()对正则表达式进行分组形成子表达式，子表达式做为一个整体考虑.</p>

<p>I 可以对重复次数元字符的作用做出精确的设定和控制，</p>

<p>II 对｜逻辑或的操作进行整体操作。</p>

<p>III 可以被回溯引用（相当于一个变量）</p>

<p>另外，子表达式在re.findall()中还可以做为列表的元组返回（后面有说明）。</p>

<p>7 前后查找（不作为分组，相当于字符作为边界）</p>

<p>语法：</p>

<p>str(?=str) 向前查找</p>

<p>(?<=str)str 向后查找</p>

<p>str(?!str) 负向前查找</p>

<p>(?<!str)str 负向后查找</p>

<p>7.1 向前查找：</p>

<p>import re</p>

<p>str="http://www.forta.com/"</p>

<p>res = r'.+(?=:)'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>str2="ftp://www.forta.com/"</p>

<p>s = re.search(res,str2)[0]</p>

<p>print(s)</p>

<p>'''</p>

<p>http</p>

<p>ftp</p>

<p>'''</p>

<p>7.2 向前向后查找</p>

<p>import re</p>

<p>str='<img src="http://baidu.com/img/1.jpg" />'</p>

<p>res = r'(?<=img src=").+?(?=")'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>'''</p>

<p>http://baidu.com/img/1.jpg</p>

<p>'''</p>

<p>7.3 返回<body></body>内的内容</p>

<p>import re</p>

<p>str="<body>…ccc</body>111<body>…ddd</body>"</p>

<p>res = r'(?<=\<[Bb]ody>).*?(?=</[Bb]ody>)'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>'''…ccc'''</p>

<p>7.4 边界字符也可以使用逻辑或</p>

<p>str = 'word2000word2007word2010word2013'</p>

<p>restr = 'word(?=2010|2013)'</p>

<p>print(re.search(restr,str))</p>

<p>'''<_sre.SRE_Match object; span=(16, 20), match='word'>'''</p>

<p>7.5 (?)内使用:而不是=时，包含后面的边界字符</p>

<p>import re</p>

<p>str = 'word2000word2007word2010word2013'</p>

<p>#restr = re.compile(r'word(?:2010|2013') 编译的话在重复使用时提高速度</p>

<p>restr = 'word(?:2010|2013)'</p>

<p>print(re.search(restr,str)[0])</p>

<p>'''word2010'''</p>

<p>8 在正则表达式里嵌入条件</p>

<p>正则表达式里的条件要用?来定义。如前面已经见过的两种特定条件：</p>

<p>I ?匹配前面一个字符或子表达式；</p>

<p>II ?=或?<=构造前后查找，匹配前面或后面的文本作为边界，但不包括边界；</p>

<p>正则表达式中嵌入条件建立在回溯引用子表达式和前后查找的基础之上，判断符号为“?”，具体语法为：</p>

<p>(?(backreference)true-regex|false-regex)</p>

<p>8.1 回溯引用条件</p>

<p>例如匹配北美电话号码格式：</p>

<p>import re</p>

<p>str="tel (123)456-7890"</p>

<p>res = r'(\()?\d{3}(?(1)\)|-)\d{3}-\d{4}'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>str2="tel 123-456-7890"</p>

<p>s = re.search(res,str2)[0]</p>

<p>print(s)</p>

<p>'''</p>

<p>(123)456-7890</p>

<p>123-456-7890</p>

<p>'''</p>

<p>(\()?构成回溯的条件，在成功的前提下，(?(1)\)|-)\构成回溯引用。注意在条件里，回溯引用编号不需要被转义，因此“?(1)”正确，而“?(\1)”不正确。</p>

<p>8.2 根据一个前后查找来进行条件处理</p>

<p>例如匹配美国邮政编码：\d{5}(?(?=-)-\d{4})。</p>

<p>嵌入条件的功能可以很好的补足正则表达式对于“if”条件的判断，从而执行相应的查找。</p>

<p>9 常用的正则表达式构造</p>

<p>9.1 URL地址</p>

<p>import re</p>

<p>str="http://forta.com/blog/others?abc"</p>

<p>res = r'https?://[-\w.]+(:\d)?(/([\w/_.]*)?)?'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>'''http://forta.com/blog/others'''</p>

<p>9.2 完整的URL地址</p>

<p>import re</p>

<p>str="http://forta.com/blog/others?abc"</p>

<p>res = r'https?://(\w*:\w*@)?[-\w.]+(:\d)?(/([\w/_.]*(\?\S+)?)?)?'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>'''http://forta.com/blog/others?abc'''</p>

<p>9.3 邮箱地址</p>

<p>import re</p>

<p>str="mail wwu@163.com"</p>

<p>res = r'(\w+\.)*\w+@(\w+\.)+[A-Za-z]+'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>'''wwu@163.com'''</p>

<p>9.4 HTML注释</p>

<p>import re</p>

<p>str="contents <!-- start of page --->"</p>

<p>res = r'<!-{2,}.*?-{2,}>'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>'''<!-- start of page --->'''</p>

<p>10 re.match方法与匹配模式</p>

<p>re.match()方法尝试从字符串的开始位置开始匹配一个模式。匹配不成功返回None，成功可以用group()或[0]引用匹配内容。</p>

<p>语法：re.match(pattern,string[,flags]</p>

<p>import re</p>

<p>str = "Hello world!"</p>

<p>print(re.match("world",str))</p>

<p>print(re.match("hello",str))</p>

<p>print(re.match("Hello",str)[0])</p>

<p>print(re.match("hello",str,re.I)[0])</p>

<p>'''None</p>

<p>None</p>

<p>Hello</p>

<p>Hello</p>

<p>'''</p>

<p>上例中的re.I表示匹配对大小写不敏感，匹配的模式还包括：</p>

<p>re.G 返回全部匹配的结果（如果未指定，一般只返回第一个匹配的结果）；</p>

<p>re.L 做本地化识别匹配；</p>

<p>re.M 多行匹配，影响^和$；</p>

<p>re.S 使.匹配包括换行符在内的所有字符；</p>

<p>re.U 根据Unicode字符集解析字符</p>

<p>re.X 采用灵活格式</p>

<p>另外，匹配模式还可以直接写在正则表达式中，如分行匹配模式还可以写成“(?m)”(字母必须小写)：</p>

<p>“(?m)”将会使整个模式变成分行匹配模式，该符号必须放在整个模式最前面。此时，“^”将匹配一行（而不是一个字符串）的开头，“$”将匹配一行（而不是一个字符串）的结尾。</p>

<p>m modifier: multi line. Causes ^ and $ to match the begin/end of each line (not only begin/end of string)</p>

<p>例如：(?m)^\s\/\/.*$</p>

<p>将匹配：编程语言中以“//”为开头的注释（包括注释前面的任意多个空白符）。</p>

<p>忽略大小写的匹配：</p>

<p>import re</p>

<p>str="ABC"</p>

<p>res = r'(?i)abc'</p>

<p>s = re.search(res,str)[0]</p>

<p>print(s)</p>

<p>'''ABC'''</p>

<p>11 使用()分组提取子串</p>

<p>正则表达式中可以使用()分组，匹配结果用group()或[]获取。</p>

<p>import re</p>

<p>str="Cats are smarter than Pigs"</p>

<p>matchObj = re.match(r'(.*) are (.*?) .*',str,re.M|re.I) #式中的?表示非贪婪匹配</p>

<p>print(matchObj.group())</p>

<p>print(matchObj.group(1))</p>

<p>print(matchObj.group(2))</p>

<p>print(matchObj[0])</p>

<p>print(matchObj[1])</p>

<p>print(matchObj[2])</p>

<p>'''</p>

<p>Cats are smarter than Pigs</p>

<p>Cats</p>

<p>smarter</p>

<p>Cats are smarter than Pigs</p>

<p>Cats</p>

<p>smarter</p>

<p>'''</p>

<p>注意到group(0)永远是原始字符串，group(1)、group(2)……表示第1、2、……个子串。</p>

<p>12 re.search()方法</p>

<p>re.search()方法尝试从字符串的任意位置开始匹配一个模式。</p>

<p>语法：re.search(pattern,string[,flags]</p>

<p>import re</p>

<p>str = "Hello world!"</p>

<p>print(re.search("world",str)[0]) # 使用正则表达式</p>

<p>print(str.find("world")) # 使用字符串方法</p>

<p>print(str.index("world"))</p>

<p>'''</p>

<p>world</p>

<p>6</p>

<p>6</p>

<p>'''</p>

<p>re.match只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None；而re.search匹配整个字符串，直到找到一个匹配。</p>

<p>13 re.findall()方法</p>

<p>语法：re.findall(pattern,string[,flags]</p>

<p>调用findall()方法可以获得正则表达式在字符串中所有匹配（从左到右）结果的列表。</p>

<p>如果pattern里含有组的话，会返回匹配到的组的列表。如果pattern里有多个分组，那么各组会先组成一个元组，然后返回值将是一个元组的列表。</p>

<p>import re</p>

<p>str = '<img src="http://assets.kgc.cn//upload/open/20170720/1500527506617342_thumb.jpg" width="100%" alt="跟璇女神爱上Java"/>'</p>

<p>restr = '<img src\s*=\s*"(.*?)"'</p>

<p>print(re.search(restr,str)[0])</p>

<p>print(re.search(restr,str)[1])</p>

<p>'''</p>

<p><img src="http://assets.kgc.cn//upload/open/20170720/1500527506617342_thumb.jpg"</p>

<p>http://assets.kgc.cn//upload/open/20170720/1500527506617342_thumb.jpg</p>

<p>'''</p>

<p>restr = '<img src\s*=\s*"(.*?)\s*"[\s\S]+alt="(.*?)\s*"'</p>

<p>s = re.findall(restr,str)</p>

<p>print(s[0])</p>

<p>print(s[0][0])</p>

<p>print(s[0][1])</p>

<p>'''</p>

<p>('http://assets.kgc.cn//upload/open/20170720/1500527506617342_thumb.jpg', '跟璇女神爱上Java')</p>

<p>http://assets.kgc.cn//upload/open/20170720/1500527506617342_thumb.jpg</p>

<p>跟璇女神爱上Java</p>

<p>'''</p>

<p>注意： match() 和 search() 只匹配一次（默认的是非G的匹配模式，匹配成功可以使用group()或下标[0]返回结果，不成功则返回None。如果使用分组匹配，则每一个分组都要匹配一次）。而 findall()匹配所有（返回一个列表或空表）。</p>

<p>14 re.finditer()方法</p>

<p>和 findall 类似，在字符串中找到正则表达式所匹配的所有子串，并把它们作为一个迭代器返回。</p>

<p>re.finditer(pattern, string, flags=0)</p>

<p>import re</p>

<p>it = re.finditer(r"\d+","12a32bc43jf3")</p>

<p>for match in it:</p>

<p>....print(match.group())</p>

<p>输出结果：</p>

<p>12</p>

<p>32</p>

<p>43</p>

<p>3</p>

<p>15 re.sub()方法</p>

<p>re.sub()方法用于替换字符串中的匹配项。</p>

<p>语法：re.sub(pattern,repl,string,count=0)</p>

<p>可选参数count是模式匹配后替换的最大次数，且必须是非负整数，缺省值是0，表示替换所有的匹配。</p>

<p>import re</p>

<p>date="2018-08-03"</p>

<p>print(re.sub(r'-',"",date)) #使用正则表达式替换</p>

<p>print(date.replace('-',"")) #使用字符串方法替换</p>

<p>'''</p>

<p>20180803</p>

<p>20180803</p>

<p>'''</p>

<p>16 re.split()方法</p>

<p>re.split()方法类似字符串内置函数split()，二者的区别在于，内置函数split()以参数分割字符串，而正则表达式方法split()以正则表达式分割字符串。</p>

<p>语法：re.split(pattern,string[,maxsplit=0])</p>

<p>使用正则表达式分割有其优势所在，因为其可以描述复杂的情形，如用空格分割字符串时，可以是一个空格、多个空格同时存在，分割后不包括空格在内。</p>

<p>import re</p>

<p>str = "Words,words,words."</p>

<p>print(re.split('\w+',str))</p>

<p>print(re.split('\W+',str))</p>

<p>print(re.split('\W+',str,1))</p>

<p>print(str.split(sep=","))</p>

<p>'''</p>

<p>['', ',', ',', '.']</p>

<p>['Words', 'words', 'words', '']</p>

<p>['Words', 'words,words.']</p>

<p>['Words', 'words', 'words.']</p>

<p>'''</p>

<p>print(re.split(r'\s*','a b c d'))</p>

<p>print('a b c d'.split(" "))</p>

<p>'''</p>

<p>['a', 'b', 'c', 'd']</p>

<p>['a', 'b', '', 'c', '', '', 'd']</p>

<p>'''</p>

<p>17 re.compile方法</p>

<p>正则表达式可以直接使用，也可以预编译后再使用。预编译后再使用的优势是可以检查表达式是否合法，如果不合法会报错。另外，当重复使用正则表达式时，不需要每一次使用时都需要再次编译，可以提高运行速度。</p>

<p>语法：re.compile(pattern[,flags])</p>

<p>18 总结一下</p>

<p>18.1 括号在正则表达式内的使用</p>

<p>() 构造逻辑分组，使用在逻辑或|、数量词、前后查找、嵌入条件、回溯引用、构造匹配模式中；</p>

<p>[]构造字符集合；</p>

<p>{} 构造数量词、形成重复匹配；</p>

<p>18.2 问号?在正则表达式内的使用</p>

<p>I 做为数量词，匹配0次或1次；</p>

<p>II 构造前后查找；</p>

<p>III 构造嵌入条件；</p>

<p>IV 在数量词后使用，构造非贪婪匹配（防止过度匹配）；</p>

<p>18.3 正则表达式对象的方法与字符串对象方法</p>

<p>应该说，正则表达式对象的方法比字符串对象方法的功能更强大，但后者使用较简单。</p>

<p>最好的测试和参考网站：https://regex101.com/</p>

<p>参考：</p>

<p>https://blog.csdn.net/Vanswells/article/details/80484115</p>

<p>内含《正则表达式必知必会》PDF文档下载链接。《正则表达式必知必会》是一本关于正则表达式使用最好的参考书之一。</p>

<p>《正则表达式必知必会》官网：http://www.forta.com/books/0134757068/</p>

<p>https://pan.baidu.com/s/1ciFoc7P_YVgs_qUWdinE3w</p>

<p>下载提取密码：u8fh</p>

<p>－End－</p>



<p style='float:right;'>本页共372段，10210个字符，17766 Byte(字节)</p>﻿




</div>


<div>
<a id="ftsizea" onclick='document.getElementById("container").style.fontSize = "1.4em";' target="_self" style="color:#fff;" title="大：1.4em"><div id="ftsize1" style="color:#fff;">大</div></a>
<a id="ftsizea" onclick='document.getElementById("container").style.fontSize = "1.2em";' target="_self" style="color:#fff;" title="中：1.2em"><div id="ftsize2" style="color:#fff;">中</div></a>
<a id="ftsizea" onclick='document.getElementById("container").style.fontSize = "1.0em";' target="_self" style="color:#fff;" title="小：1em"><div id="ftsize3" style="color:#fff;">小</div></a>

<a target="_self" style="color:#fff;"><div style="display:none; color:#fff;" id="goTopBtn">&and;</div></a>
<a onclick="shangy()" target="_self" style="color:#fff;"><div style="display:none; color:#fff;" id="shangy">&uarr;</div></a>
<a onclick="xiay()" target="_self" style="color:#fff;"><div id="xiay" style="color:#fff;">&darr;</div></a>
<a onclick="downn()" target="_self" style="color:#fff;"><div id="goBottom" style="color:#fff;">&or;</div></a>
<script type=text/javascript>
	goTopEx();
	function xiay(){
		window.scrollBy(0,window.innerHeight-10);
	}
	function shangy(){
		window.scrollBy(0,-window.innerHeight+10);
	}
	var obj3=document.getElementById("xiay");
	var obj4=document.getElementById("goBottom");
	function getHeight(){  
		if(browser4=="ch"){
			//谷歌浏览器
			return document.body.clientHeight; 
		}else{
			//IE、firefox等浏览器 
			return document.documentElement.clientHeight;  
		}  
	}
	getHeight()<window.innerHeight+50?obj3.style.display="none":obj3.style.display="";
	getHeight()<window.innerHeight+50?obj4.style.display="none":obj4.style.display="";
	if(browser4!="ch"){	//firefox需要尝一下才显示向下图标
		xiay();
		shangy();
	}
</script>
</div>

</body>
</html>
