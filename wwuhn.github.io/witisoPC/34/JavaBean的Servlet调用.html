<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base target="_blank" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <script type="text/javascript">
 
 function goTopEx(){
        var obj=document.getElementById("goTopBtn");
        function getScrollTop(){
                return document.documentElement.scrollTop;
            }
        function setScrollTop(value){
                document.documentElement.scrollTop=value;
            }    
        window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
        obj.onclick=function(){
            var goTop=setInterval(scrollMove,10);
            function scrollMove(){
                    setScrollTop(getScrollTop()/111);
                    if(getScrollTop()<1)clearInterval(goTop);
                }
        }
    }


</script>
<script type="text/javascript">
 
 function goTopEx(){
        var obj=document.getElementById("goTopBtn");
        function getScrollTop(){
                return document.documentElement.scrollTop;
            }
        function setScrollTop(value){
                document.documentElement.scrollTop=value;
            }    
        window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
        obj.onclick=function(){
            var goTop=setInterval(scrollMove,10);
            function scrollMove(){
                    setScrollTop(getScrollTop()/111);
                    if(getScrollTop()<1)clearInterval(goTop);
                }
        }
    }


</script>
<title>JavaBean的Servlet调用</title>

 <style type="text/css">
#tbrowser a:link，.container a:visited{
font-size:18px;
text-decoration:none;
}
.container{
font-size:1.2em;
margin:auto;
font-family:"宋体";
width:75.29%;
line-height:1.4em;
}
P{
margin:8px;
text-indent:2em;
}
.uls{
color:#CC6666;
font-weight:bold;
}
.uls>ol{
list-style:none;
font-weight:normal;
list-style:lower-latin;
color:#000000;
line-height:1.3em;

}
h2{
font-size:20px;
font-weight:bold;
margin-top:15px;
margin-bottom:0px;
text-indent:0em;
}
img{
margin-right:5px;
}
.fc{
color:red;
}

a:link {
	text-decoration: none;
}


a:visited {
	text-decoration: none;
}
a:hover {
	text-decoration: none;
}
a:active {
	text-decoration: none;
}


#goTopBtn {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color:#eee;
    color:#000;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 105px;
    _bottom: "auto";
    cursor: pointer;
    opacity: .6;
    filter: Alpha(opacity=30);
	opacity=.3;
}
 #goTopBtn:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 
 
#goBottom {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 30px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
	writing-mode:tb-rl;
}
 #goBottom:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 #shangy {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 80px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
}
#xiay {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 55px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
}
 
 img{
 border:0;
 }
 
 \s*</p>

<p>\s*
 
 
</p>

<p>
</style>
</head>

<body>

<div class="container">
<p>JavaBean的Servlet调用</p>

<p></p>

<p>I:\wwuhn\Website\witiso\21\jspall\WEB-INF\classes\ch8：放置JavaBean,Servlet;</p>

<p>D:\Tomcat  7.0\work\Catalina\localhost\_\org\apache\jsp:java源文件和class文件；</p>

<p></p>

<p>JSP调用JavaBean(html输入,TaxBean.java处理，jsp输出)</p>

<p>taxpincome.html</p>

<p>&lt;form name=form1&quot; method=&quot;post&quot;  action=&quot;taxpincome.jsp&quot;&gt;</p>

<p>&lt;td&gt;当月个人总收入:&lt;/td&gt;&lt;td&gt;&lt;input  type=&quot;text&quot;  name=&quot;sumincom&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;</p>

<p>&lt;td&gt;当地个人所得税个人起征额:&lt;/td&gt;&lt;td&gt;&lt;input  type=&quot;text&quot; name=&quot;taxstart&quot; value=&quot;3500&quot;&gt;</p>

<p>taxpincome.jsp       &lt;jsp:useBean  id=&quot;splBean&quot; class=&quot;ch10.TaxBean&quot; /&gt;</p>

<p>String  sumincom=request.getParameter(&quot;sumincom&quot;);</p>

<p>splBean.setSumincom(sumincom);</p>

<p>splBean.calculate();</p>

<p>&lt;p&gt;当月个人应纳个人所得税收入额（未缴三险一金）：&lt;%=sumincom %&gt;</p>

<p>&lt;p&gt;当月个人应纳个人所得税（未缴三险一金）：&lt;%=splBean.getTax() %&gt;</p>

<p>TaxBean.java  package  ch10;</p>

<p>public  class TaxBean{set---;get---;public void calculate(){</p>

<p>编译         文件编译后放到classes/ch10;</p>

<p></p>

<p>JSP调用Servlet（html输入，TaxServlet.java处理，JSP输出）</p>

<p></p>

<p>taxpincome2.html  &lt;form  name=form1&quot; method=&quot;post&quot; action=&quot;taxpincome2.jsp&quot;&gt;</p>

<p>taxpincome2.jsp     &lt;%@  page import=&quot;ch11.TaxServlet&quot;%&gt;</p>

<p>TaxServlet  splSvlt=new TaxServlet();</p>

<p>String  sumincom=request.getParameter(&quot;sumincom&quot;);</p>

<p>splSvlt.setTaxstart(taxstart);</p>

<p>splSvlt.calculate();</p>

<p>&lt;p&gt;当月个人应纳个人所得税（未缴三险一金）：&lt;%=splSvlt.getTax() %&gt;</p>

<p>TaxServlet.java        package  ch11;set---;get---;</p>

<p>public  class TaxServlet extends HttpServlet{</p>

<p>public  void calculate(){</p>

<p>编译         1 复制bin/servlet-api.jar到TaxServlet.java所在目录；</p>

<p>2 cmd→cd到本目录：javac  -classpath servlet-api.jar TaxServlet.java</p>

<p>3 复制编译好的TaxServlet.class到WEB-INF\classes/ch11</p>

<p></p>

<p>Servlet调用JavaBean（html输入，TaxBean2.java处理，TaxServlet3.java输出显示；）</p>

<p>taxpincome3.html  &lt;form  name=form1&quot; method=&quot;post&quot; action=&quot;taxpincome3.jsp&quot;&gt;</p>

<p>TaxBean2.java         package  ch12;</p>

<p>public  class TaxBean2{</p>

<p>public  class TaxBean{set---;get---;public void calculate(){</p>

<p>编译         文件编译后放到classes/ch12;</p>

<p>TaxServlet3.java     package  ch12;</p>

<p>import  ch12.TaxBean2;</p>

<p>public  class TaxServlet3 extends HttpServlet{</p>

<p>TaxBean2  splBean=new TaxBean2();</p>

<p>splBean.setSumincom(sumincom);</p>

<p>splBean.calculate();</p>

<p>out.println(&quot;&lt;p&gt;当月个人应纳个人所得税收入额（未缴三险一金）：&quot;+sumincom+&quot;&lt;br&gt;&quot;);</p>

<p>编译         将当前目录Ch12下TaxBean2.class,打包（命令行会在本目录下生成）；</p>

<p>jar cvf  bean.jar ./ch12/TaxBean2.class;</p>

<p>编译本文件TaxServlet3.java;</p>

<p>javac  -classpath servlet-api.jar;bean.jar TaxServlet3.java</p>

<p>将编译好的TaxServlet3.class复制到WEB-INF的ch12下;</p>

<p>部署servlet    新建WEB_INF/web.xml文件；</p>

<p>... 部署servlet:TaxServlet3</p>

<p>&lt;  servlet&gt;</p>

<p>&lt;  servlet-name&gt;TaxServlet3&lt; /servlet-name&gt;</p>

<p>&lt;  servlet-class&gt;ch12.TaxServlet3&lt; /servlet-class&gt;</p>

<p>&lt;  /servlet&gt;</p>

<p>&lt;  servlet-mapping&gt;</p>

<p>&lt;  servlet-name&gt;TaxServlet3&lt; /servlet-name&gt;</p>

<p>&lt;  url-pattern&gt;/TaxServlet3&lt; /url-pattern&gt;</p>

<p>&lt;  /servlet-mapping&gt;</p>

<p>&lt;  /web-app&gt;</p>

<p>当打开taxPincome.html.表单输入后，输出的页面是servlet,其显示的网址是：http://localhost:8080/TaxServlet3</p>

<p>JavaBean和Servlet都需放到\WEB-INF\classes\packageName\目录下，JavaBean的功能是逻辑处理，只是内部存取，当然Servlet也可以充当此一功能，但当Servlet如果嵌入HTML代码，做对外开放的网页输出时，此需要在web.xml文件内做相关设定；</p>

<p></p>
<p>

</div>
<a name="bottom" id="bottom"></a>
<DIV style="DISPLAY: none" id=goTopBtn>&and;</DIV>
<div id="goBottom"><a href="#bottom" target="_self">&or;</a></div>
<SCRIPT type=text/javascript>goTopEx();</SCRIPT>
</body>
</html>
<script language="javascript"> 
bg_evensssss("tbrowser","#fff","#F5F5F5","#FFFFCC","#FFDDFF");/*#FFFF84*/
</script>
