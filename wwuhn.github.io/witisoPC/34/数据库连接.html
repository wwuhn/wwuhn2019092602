<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base target="_blank" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <script type="text/javascript">
 
 function goTopEx(){
        var obj=document.getElementById("goTopBtn");
        function getScrollTop(){
                return document.documentElement.scrollTop;
            }
        function setScrollTop(value){
                document.documentElement.scrollTop=value;
            }    
        window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
        obj.onclick=function(){
            var goTop=setInterval(scrollMove,10);
            function scrollMove(){
                    setScrollTop(getScrollTop()/111);
                    if(getScrollTop()<1)clearInterval(goTop);
                }
        }
    }


</script>
<script type="text/javascript">
 
 function goTopEx(){
        var obj=document.getElementById("goTopBtn");
        function getScrollTop(){
                return document.documentElement.scrollTop;
            }
        function setScrollTop(value){
                document.documentElement.scrollTop=value;
            }    
        window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
        obj.onclick=function(){
            var goTop=setInterval(scrollMove,10);
            function scrollMove(){
                    setScrollTop(getScrollTop()/111);
                    if(getScrollTop()<1)clearInterval(goTop);
                }
        }
    }


</script>
<title>数据库连接</title>

 <style type="text/css">
#tbrowser a:link，.container a:visited{
font-size:18px;
text-decoration:none;
}
.container{
font-size:1.2em;
margin:auto;
font-family:"宋体";
width:75.29%;
line-height:1.4em;
}
P{
margin:8px;
text-indent:2em;
}
.uls{
color:#CC6666;
font-weight:bold;
}
.uls>ol{
list-style:none;
font-weight:normal;
list-style:lower-latin;
color:#000000;
line-height:1.3em;

}
h2{
font-size:20px;
font-weight:bold;
margin-top:15px;
margin-bottom:0px;
text-indent:0em;
}
img{
margin-right:5px;
}
.fc{
color:red;
}

a:link {
	text-decoration: none;
}


a:visited {
	text-decoration: none;
}
a:hover {
	text-decoration: none;
}
a:active {
	text-decoration: none;
}


#goTopBtn {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color:#eee;
    color:#000;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 105px;
    _bottom: "auto";
    cursor: pointer;
    opacity: .6;
    filter: Alpha(opacity=30);
	opacity=.3;
}
 #goTopBtn:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 
 
#goBottom {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 30px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
	writing-mode:tb-rl;
}
 #goBottom:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 #shangy {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 80px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
}
#xiay {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 55px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
}
 
 img{
 border:0;
 }
 
 \s*</p>

<p>\s*
 
 
</p>

<p>
</style>
</head>

<body>

<div class="container">
<p>数据库连接</p>

<p>传统的数据库连接方法</p>

<p>1 针对数据库类型装载数据库驱动器，可以选择隐式或显式（class.forName()方法装载）；</p>

<p>2 在JSP或JavaBean程序中建立数据库连接，然后使用DriverManager.getConnection()方法获得一个Connection实例；</p>

<p>3 使用Connection对象的CreateStatement()方法生成statement或者使用preparedStatement()方法生成preparedStatement对象，并进行相应的SQL操作；</p>

<p>4 获取到返回结果ResultSet进行数据操作；</p>

<p>5 最后断开数据库连接；</p>

<p>数据库连接池技术</p>

<p>上面的方法要求每一次数据库操作都需要进行一次数据库连接请求，使用完后再进行资源释放。连接池技术是预先建立一些数据库连接，并旋转在内在“池”对象中，以备用户进行数据库操作时直接使用，数据库的建立，断开等都由连接池统一管理；</p>

<p>数据库连接操作过程</p>

<p>1 下载数据库连接包（驱动）mysql-connector-java-5.1.22-bin.jar，复制到JDK，tomcat,web应用/WEB-INF三个地方的lib文件夹内，并加载到classpath环境变量中；</p>

<p>2 通过class类的forName()方法来向DriverManager注册驱动。</p>

<p>class.forName(&quot;com.mysql.jdbc.Driver&quot;);</p>

<p>3 获取数据库连接：connection对象代表与数据库的连接，用DriverManager类的getConnector()方法获取与数据库的连接，此方法需要传入一个定位，即连接到的加的URL的字符串的参数，这个URL由三部分组成：</p>

<p>&lt;protocal&gt;:&lt;subprotocal&gt;:&lt;subname&gt;</p>

<p>JDBC         ODBC或mysql   数据库标识（库名、用户名、密码）</p>

<p>String  url=&quot;jdbc:mysql://localhost/dataiso?user=root&amp;p…)</p>

<p>connection conn=DriverManager.getConnection(url);</p>

<p>4 获得Statement及其子类对象：statement对象允许执行简单的SQL查询，通过它的CreateStatement()方法创建它；</p>

<p>statement  stmt=conn.createStatement();</p>

<p>5 利用statement对象的方法执行SQL语句</p>

<p>5.1 public ResultSet rs=stmt.executeQuery(String  sql);</p>

<p>该方法查询并返回resultSet对象；</p>

<p>5.2 public int stmt.executeUpdate(String sql);</p>

<p>该方法执行SQL insert,update,delete语句并返回受影响的行数，可以从数据库中获取信息的对象有：</p>

<p>1 DataBaseMetaData:有关整个数据库的信息；</p>

<p>2 ResultSet:逐行访问，能以任何顺序访问字段；</p>

<p>3 ResultSetMetaData:有关ResultSet中列的名称和类型等信息；</p>

<p>6 处理返回结果：ResultSet对象是封闭了返回结果的对象，它提供访问数据的方法，该对象有一个指针，初始化时指针在第一行之前；next()方法把指针移到下一行，通过调用getxxx(int column-number)方法得到行中的列数据，xxx指的是列的数据类型如String,Integer,Date等；</p>

<p>ResultSet rs=stmt.executeQuery(&quot;select * from  family&quot;);</p>

<p>while(rs.next()){</p>

<p>System.out.println(rs.getString(1));</p>

<p>7 数据库操作结束后应该关闭数据库操作对象，以释放资源；</p>

<p>stmt.close();</p>

<p>conn.close();</p>

<p>数据库连接操作语句</p>

<p>1 DriveManager类用于装载驱动，它的所有成员都是静态成员，无须实例化，直接通过类名就可以访问它，class.forName()是它的常用方法；</p>

<p>2 Connection类是对某一指定数据库的连接，向数据库进行的SQL操作都必须以它为基础；</p>

<p>3 statement类，该对象用于将SQL语句发送到数据库中；</p>

<p>4 ResultSet包含符合SQL语句执行结果的所有行，并且它通过一套get访求提供了对这些行中的数据方法的访问，通过while(rs.next())循环逐条地将记录集中的记录依次获致；</p>

<p>int getInt(int columnIndex):获取当前行中第columnIndex列的整数值；</p>

<p>int getInt(String columnName):获得当 </p>
<p>

</div>
<a name="bottom" id="bottom"></a>
<DIV style="DISPLAY: none" id=goTopBtn>&and;</DIV>
<div id="goBottom"><a href="#bottom" target="_self">&or;</a></div>
<SCRIPT type=text/javascript>goTopEx();</SCRIPT>
</body>
</html>
<script language="javascript"> 
bg_evensssss("tbrowser","#fff","#F5F5F5","#FFFFCC","#FFDDFF");/*#FFFF84*/
</script>
