<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base target="_blank" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">
function goTopEx(){
	var obj=document.getElementById("goTopBtn");
	function getScrollTop(){
			return document.documentElement.scrollTop;
		}
	function setScrollTop(value){
			document.documentElement.scrollTop=value;
		}    
	window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
	obj.onclick=function(){
		var goTop=setInterval(scrollMove,10);
		function scrollMove(){
				setScrollTop(getScrollTop()/111);
				if(getScrollTop()<1)clearInterval(goTop);
			}
	}
}

 
 function goTopEx(){
        var obj=document.getElementById("goTopBtn");
        function getScrollTop(){
                return document.documentElement.scrollTop;
            }
        function setScrollTop(value){
                document.documentElement.scrollTop=value;
            }    
        window.onscroll=function(){getScrollTop()>0?obj.style.display="":obj.style.display="none";}
        obj.onclick=function(){
            var goTop=setInterval(scrollMove,10);
            function scrollMove(){
                    setScrollTop(getScrollTop()/111);
                    if(getScrollTop()<1)clearInterval(goTop);
                }
        }
    }


</script>
<title>VC对话框背景颜色、控件颜色 </title>

<style type="text/css">
#tbrowser a:link，.container a:visited{
font-size:18px;
text-decoration:none;
}
.container{
font-size:1.2em;
margin:auto;
font-family:"宋体";
width:75.29%;
line-height:1.6em;
}
P{
margin:16px;
text-indent:2em;
}
.uls{
color:#CC6666;
font-weight:bold;
}
.uls>ol{
list-style:none;
font-weight:normal;
list-style:lower-latin;
color:#000000;
line-height:1.3em;
}
h2{
font-size:20px;
font-weight:bold;
margin-top:15px;
margin-bottom:0px;
text-indent:0em;
}
img{
margin-right:5px;
}
.fc{
color:red;
}

a:link {
	text-decoration: none;
}


a:visited {
	text-decoration: none;
}
a:hover {
	text-decoration: none;
}
a:active {
	text-decoration: none;
}


#goTopBtn {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color:#eee;
    color:#000;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 105px;
    _bottom: "auto";
    cursor: pointer;
    opacity: .6;
    filter: Alpha(opacity=30);
	opacity=.3;
}
 #goTopBtn:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 
 
#goBottom {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 30px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
	writing-mode:tb-rl;
}
 #goBottom:hover{
 background-color:white;
 border:#ccc 1px solid;
 color:red;
 }
 #shangy {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 80px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
}
#xiay {
	width: 18px;
    line-height: 1.2;
    padding: 5px 0;
    background-color: #eee;
    color: #fff;
    font-size: 12px;
    text-align: center;
    position: fixed;
    _position: absolute;
 
    right: 10px;
    bottom: 55px;
    _bottom: "auto";
    cursor: pointer;
    filter: Alpha(opacity=30);
	opacity=.3;
}
 
img{
border:0;
}
.picsay{
color:#930;
font-size:90%;
line-height:110%;
margin-top:-12px;
padding:0;
}

</style>
</head>

<body>

<div class="container">
  <h4><a href="http://blog.csdn.net/akof1314/article/details/4952372"> VC 对话框背景颜色、控件颜色</a></h4>
  <h4></h4>
  <h4><strong>对话框背景颜色：</strong></h4>
  <p>① 新建一个基于Dialog的MFC AppWizard应用程序ExampleDlg。</p>
  <p>方法1  ：重载OnPaint()，即WM_PAINT消息。有关代码如下（以上例工程为准）：
  <p class="picsay">void   CExampleDlgDlg::OnPaint()</p>

<p class="picsay">{</p>

<p class="picsay">if  (IsIconic())</p>

<p class="picsay">…</p>

<p class="picsay">else</p>

<p class="picsay">{</p>

<p class="picsay">CRect   rect;</p>

<p class="picsay">CPaintDC   dc(this);</p>

<p class="picsay">GetClientRect(rect);</p>

<p class="picsay">dc.FillSolidRect(rect,RGB(0,255,0));     //设置为绿色背景</p>

<p class="picsay">CDialog::OnPaint();</p>

<p class="picsay">}</p>

<p class="picsay">}</p>
  <p>方法2  ：重载OnCtlColor (CDC* pDC, CWnd* pWnd, UINT nCtlColor)，即WM_CTLCOLOR消息。具体步骤如下（以上例工程为准）：1 向导：整个对话框的add class;2 增加的文件在recordsDlg.cpp下；</p>

<p>①在CExampleDlgDlg的头文件中，添加一个CBrush的成员变量：</p>
  <p class="picsay">class   CExampleDlgDlg   :   public   CDialog</p>

<p class="picsay">{...</p>

<p class="picsay">protected:</p>

<p class="picsay">CBrush   m_brush;</p>

<p class="picsay">...</p>

<p class="picsay">}; </p>
  <p class="picsay"> ②在OnInitDialog()函数中添加如下代码： </p>
  <p class="picsay">BOOL   CExampleDlgDlg::OnInitDialog()</p>

<p class="picsay">{</p>

<p class="picsay">...</p>

<p class="picsay">//   TODO:   Add   extra   initialization   here</p>

<p class="picsay">m_brush.CreateSolidBrush(RGB(0,   255,   0));   //   生成一绿色刷子</p>

<p class="picsay">...</p>

<p class="picsay">} </p>
  <p>③利用ClassWizard重载OnCtlColor(…)，即WM_CTLCOLOR消息： </p>
  <p class="picsay">HBRUSH   CExampleDlgDlg::OnCtlColor(CDC*   pDC,   CWnd*   pWnd,   UINT   nCtlColor)</p>

<p class="picsay">{</p>

<p class="picsay">/*</p>

<p class="picsay">**   这里不必编写任何代码！</p>

<p class="picsay">**下行代码要注释掉</p>

<p class="picsay">**   HBRUSH   hbr   =   CDialog::OnCtlColor(pDC,   pWnd,   nCtlColor);</p>

<p class="picsay">*/</p>

<p class="picsay">return   m_brush;       //返加绿色刷子</p>

<p class="picsay">} </p>
  <p>方法四  ：还是重载OnCtlColor (CDC* pDC, CWnd* pWnd, UINT nCtlColor)，即WM_CTLCOLOR消息。具体步骤如下（以上例工程为准）：</p>

<p>步骤①、②同上方法三中的步骤①、②。</p>

<p>步骤③利用ClassWizard重载OnCtlColor(…)（即WM_CTLCOLOR消息）时则有些不同：</p>
  <p class="picsay">HBRUSH   CExampleDlgDlg::OnCtlColor(CDC*   pDC,   CWnd*   pWnd,   UINT   nCtlColor)</p>

<p class="picsay">{</p>

<p class="picsay">HBRUSH   hbr   =   CDialog::OnCtlColor(pDC,   pWnd,   nCtlColor);</p>

<p class="picsay">//在这加一条是否为对话框的判断语句</p>

<p class="picsay">if(nCtlColor   ==CTLCOLOR_DLG)</p>

<p class="picsay">return   m_brush;       //返加绿色刷子</p>

<p class="picsay">return   hbr;</p>

<p class="picsay">}</p>
  <h4><strong>控件颜色：</strong></h4>
  <p>对于分布在对话框上的控件，我们可以修改其颜色、其背景颜色，比如对静态文本、文本编辑框、列表框等等。</p>
  <p>步骤①、②同上方法三中的步骤①、②。</p>

<p>步骤③：利用ClassWizard重载OnCtlColor(…)（即WM_CTLCOLOR消息）时则有些不同：</p>
<p class="picsay">HBRUSH CTestDlg::OnCtlColor(CDC* pDC, CWnd* pWnd, UINT nCtlColor)</p>

<p class="picsay">{</p>

<p class="picsay">HBRUSH hbr = CDialog::OnCtlColor(pDC, pWnd, nCtlColor);</p>

<p class="picsay">if(nCtlColor   ==CTLCOLOR_DLG)      //对话框颜色</p>

<p class="picsay">return   m_brush;       //返加绿色刷子</p>

<p class="picsay">if(nCtlColor==CTLCOLOR_STATIC &amp;&amp; pWnd-&gt;GetDlgCtrlID()==IDC_STATIC)  //静态文本颜色，并且指定控件ID号</p>

<p class="picsay">{</p>

<p class="picsay">pDC-&gt;SetTextColor(RGB(255,0,0));</p>

<p class="picsay">pDC-&gt;SetBkColor(RGB(191,219,255));     //静态控件的背景颜色设置，这里设置于背景颜色一致，则可以免设置透明</p>

<p class="picsay">//pDC-&gt;SetBkMode(TRANSPARENT);    //模式设置透明的话，则忽略静态控件的背景颜色设置，与对话框颜色融合</p>

<p class="picsay">hbr=(HBRUSH)m_brush;</p>

<p class="picsay">}</p>

<p class="picsay">if(nCtlColor==CTLCOLOR_EDIT)    //文本编辑框颜色</p>

<p class="picsay">{</p>

<p class="picsay">pDC-&gt;SetTextColor(RGB(0,0,255));</p>

<p class="picsay">//pDC-&gt;SetBkColor(RGB(191,219,255));     //静态控件的背景颜色设置</p>

<p class="picsay">pDC-&gt;SetBkMode(TRANSPARENT);</p>

<p class="picsay">hbr=(HBRUSH)m_brush;</p>

<p class="picsay">}</p>

<p class="picsay">return hbr;</p>

<p class="picsay">}

</div>
<a name="bottom" id="bottom"></a>
<DIV style="DISPLAY: none" id=goTopBtn>&and;</DIV>
<div id="goBottom"><a href="#bottom" target="_self">&or;</a></div>
<SCRIPT type=text/javascript>goTopEx();</SCRIPT>
</body>
</html>
<script language="javascript"> 
bg_evensssss("tbrowser","#fff","#F5F5F5","#FFFFCC","#FFDDFF");/*#FFFF84*/
</script>

<!--
_____________________________________________________________________________________

1 段落替换：
\s*</p>

<p>\s*
------------------
</p>

<p>
_____________________________________________________________________________________
2 汉字中间的空格替换：
([^\s\*^{}"^u4e00-u9fa5])\s+([^\s\*^{}"^u4e00-u9fa5])
------------------
$1$2
_____________________________________________________________________________________
3 段落前的空格替换
[\s*</p>\s*]
[\s*<p>\s*]
------------------
</p>

<p>
_____________________________________________________________________________________
-->